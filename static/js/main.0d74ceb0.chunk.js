(this.webpackJsonpoctavia_material=this.webpackJsonpoctavia_material||[]).push([[0],{235:function(e,t,r){},313:function(e,t,r){"use strict";r.r(t);var n=r(0),a=r.n(n),i=r(15),o=r.n(i),c=(r(235),r(18)),d=r(93),s=r(20),f=r(29),u=r(173),l=r.n(u),b=r(169),j=r.n(b),O=r(160),p=r.n(O),y=r(168),h=r.n(y),g=r(162),v=r.n(g),Q=r(134),w=r.n(Q),T=r(135),C=r.n(T),x=r(122),B=r.n(x),U=r(167),m=r.n(U),W=r(165),k=r.n(W),R=r(164),S=r.n(R),E=r(163),M=r.n(E),H=r(159),D=r.n(H),P=r(166),_=r.n(P),A=r(161),q=r.n(A),z=r(158),F=r.n(z),I=r(16),L={Add:Object(n.forwardRef)((function(e,t){return Object(I.jsx)(j.a,Object(c.a)(Object(c.a)({},e),{},{ref:t}))})),Check:Object(n.forwardRef)((function(e,t){return Object(I.jsx)(h.a,Object(c.a)(Object(c.a)({},e),{},{ref:t}))})),Clear:Object(n.forwardRef)((function(e,t){return Object(I.jsx)(C.a,Object(c.a)(Object(c.a)({},e),{},{ref:t}))})),Delete:Object(n.forwardRef)((function(e,t){return Object(I.jsx)(B.a,Object(c.a)(Object(c.a)({},e),{},{ref:t}))})),DetailPanel:Object(n.forwardRef)((function(e,t){return Object(I.jsx)(w.a,Object(c.a)(Object(c.a)({},e),{},{ref:t}))})),Edit:Object(n.forwardRef)((function(e,t){return Object(I.jsx)(m.a,Object(c.a)(Object(c.a)({},e),{},{ref:t}))})),Export:Object(n.forwardRef)((function(e,t){return Object(I.jsx)(_.a,Object(c.a)(Object(c.a)({},e),{},{ref:t}))})),Filter:Object(n.forwardRef)((function(e,t){return Object(I.jsx)(k.a,Object(c.a)(Object(c.a)({},e),{},{ref:t}))})),FirstPage:Object(n.forwardRef)((function(e,t){return Object(I.jsx)(S.a,Object(c.a)(Object(c.a)({},e),{},{ref:t}))})),LastPage:Object(n.forwardRef)((function(e,t){return Object(I.jsx)(M.a,Object(c.a)(Object(c.a)({},e),{},{ref:t}))})),NextPage:Object(n.forwardRef)((function(e,t){return Object(I.jsx)(w.a,Object(c.a)(Object(c.a)({},e),{},{ref:t}))})),PreviousPage:Object(n.forwardRef)((function(e,t){return Object(I.jsx)(v.a,Object(c.a)(Object(c.a)({},e),{},{ref:t}))})),ResetSearch:Object(n.forwardRef)((function(e,t){return Object(I.jsx)(C.a,Object(c.a)(Object(c.a)({},e),{},{ref:t}))})),Search:Object(n.forwardRef)((function(e,t){return Object(I.jsx)(q.a,Object(c.a)(Object(c.a)({},e),{},{ref:t}))})),SortArrow:Object(n.forwardRef)((function(e,t){return Object(I.jsx)(p.a,Object(c.a)(Object(c.a)({},e),{},{ref:t}))})),ThirdStateCheck:Object(n.forwardRef)((function(e,t){return Object(I.jsx)(D.a,Object(c.a)(Object(c.a)({},e),{},{ref:t}))})),ViewColumn:Object(n.forwardRef)((function(e,t){return Object(I.jsx)(F.a,Object(c.a)(Object(c.a)({},e),{},{ref:t}))}))},K=r(206),N=r.n(K),Y=r(205),J=r.n(Y),V=r(204),G=r.n(V),X=r(207),Z=r.n(X),$=r(208),ee=r.n($),te=r(203),re=r.n(te),ne=r(202),ae=r.n(ne),ie=r(397),oe=(r(296),r(94)),ce=function(){var e=Object(n.useState)(!1),t=Object(f.a)(e,2),r=(t[0],t[1],Object(n.useState)([{id:0,Query:"SELECT * FROM",BU:"",parentid:"no"},{id:1,Query:"@bu_table",BU:"",parentid:"no"},{id:1,Query:"dsfsdfdsfdsf",BU:"Others",parentid:1},{id:2,Query:"dsfsdfdsfdsf",BU:"WTCMY",parentid:1},{id:3,Query:"dsfsdfdsfdsf",BU:"WTCTH",parentid:1},{id:4,Query:"WHERE condition",BU:"",parentid:"no"},{id:5,Query:"@bu",BU:"",parentid:"no"},{id:6,Query:"dsfsdfdsfdsf",BU:"WTCTW",parentid:5},{id:7,Query:"dsfsdfdsfdsf",BU:"Others",parentid:5},{id:8,Query:"dsfsdfdsfdsf",BU:"WTCTH",parentid:5}])),a=Object(f.a)(r,2),i=(a[0],a[1],Object(n.useState)([{id:0,Query:"SELECT * FROM",BU:"",parentid:"no"},{id:1,Query:"@bu_table",BU:"",parentid:"no"},{id:2,Query:"dsfsdfdsfdsf",BU:"Others",parentid:1},{id:3,Query:"dsfsdfdsfdsf",BU:"WTCMY",parentid:1},{id:4,Query:"dsfsdfdsfdsf",BU:"WTCTH",parentid:1},{id:5,Query:"WHERE condition",BU:"",parentid:"no"},{id:6,Query:"@bu",BU:"",parentid:"no"},{id:7,Query:"dsfsdfdsfdsf",BU:"WTCTW",parentid:6},{id:8,Query:"dsfsdfdsfdsf",BU:"Others",parentid:6},{id:9,Query:"dsfsdfdsfdsf",BU:"WTCTH",parentid:6}])),o=Object(f.a)(i,2),b=o[0],j=o[1],O=Object(n.useState)([{id:0,Query:"SELECT * FROM",BU:"",parentid:"no"},{id:1,Query:"@bu_table",BU:"",parentid:"no"},{id:2,Query:"dsfsdfdsfdsf",BU:"Others",parentid:1},{id:3,Query:"dsfsdfdsfdsf",BU:"WTCMY",parentid:1},{id:4,Query:"dsfsdfdsfdsf",BU:"WTCTH",parentid:1},{id:5,Query:"WHERE condition",BU:"",parentid:"no"},{id:6,Query:"@bu",BU:"",parentid:"no"},{id:7,Query:"dsfsdfdsfdsf",BU:"WTCTW",parentid:6},{id:8,Query:"dsfsdfdsfdsf",BU:"Others",parentid:6},{id:9,Query:"dsfsdfdsfdsf",BU:"WTCTH",parentid:6}]),p=Object(f.a)(O,2),y=p[0],h=p[1],g=Object(n.useState)([{title:"Query",field:"Query",editable:"always",cellStyle:{textAlign:"centre"},editComponent:function(e){var t="";return t=e.value.includes("@")?e.value.replace("@",""):e.value,Object(I.jsx)(ie.a,{fullWidth:!0,multiline:!0,value:t,onChange:function(t){return e.onChange(t.target.value)}})}},{title:"BU",field:"BU",textAlign:"centre",lookup:{None:"",Others:"Others",FTRTH:"FTRHK",PNSHK:"PNSHK",WTCHK:"WTCHK",WTCID:"WTCID",WTCPH:"WTCPH",WWHK:"WWHK",WTCTW:"WTCTW",WTCMY:"WTCMY",WTCTH:"WTCTH",WTCSG:"WTCSG"}}]),v=Object(f.a)(g,2),Q=v[0],w=(v[1],function(){var e=Object(s.a)(y),t=[],r={},n=["ftrhk","pnshk","wtchk","wtcid","wtcph","wwhk","wtctw","wtcmy","wtcth","wtcsg"],a=[],i="",o="nothing",c="nothing";for(var d in n)a.push(n[d].toUpperCase());for(var f in e)"no"==e[f].parentid&&t.push(e[f].Query);for(var f in e)if(1==e[f].Query.includes("@")){var u=e[f].Query.substring(1);for(var l in r[u]=[],e)e[l].parentid==e[f].id&&r[u].push({BU:e[l].BU,Query:e[l].Query})}for(var b in r["@bu_query"]={},a)for(var j in r["@bu_query"][a[b]]=[],t)if(o="nothing",c="nothing",1==t[j].includes("@")){for(var O in r[i=t[j].substring(1)])r[i][O].BU==a[b]&&(o=r[i][O].Query),"Others"==r[i][O].BU&&(c=r[i][O].Query);"nothing"==o?r["@bu_query"][a[b]].push(c):r["@bu_query"][a[b]].push(o)}else r["@bu_query"][a[b]].push(t[j]);r.template_query=t;var p=JSON.stringify(r),h=new Blob([p],{type:"text/plain"}),g=URL.createObjectURL(h),v=document.createElement("a");v.download="master.json",v.href=g,v.click()}),T=function(e,t){j(Object(s.a)(y));for(var r=Object(s.a)(y),n=t.id,a=Math.floor(1e6*Math.random()),i=[],o=void 0,c="";void 0!=o;)a=Math.floor(1e6*Math.random()),void 0==(o=i.find((function(e){return e==a})))&&(o=i.find((function(e){return e==a+1})));for(var d in r.push({id:a,Query:"-",BU:"-",parentid:n}),r)c=r[d].Query,r[d].id==n&1!=r[d].Query.includes("@")&&(r[d].Query="@"+c);setTimeout((function(){h(r),W(!1)}),500)},C={row:-1,dropIndex:-1},x=function(e,t){j(Object(s.a)(y));var r=y;if("no"==r[e].parentid&"no"==r[t].parentid);else{if(!("no"!=r[e].parentid&"no"!=r[t].parentid))return;if(r[e].parentid!=r[t].parentid)return}var n=function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];if(e<t){console.log("to higher");var n=r.slice(0,e),a=r.slice(e+1,t+1),i=r.slice(t+1),o=[].concat(Object(s.a)(n),Object(s.a)(a),[r[e]],Object(s.a)(i));if("no"!=r[e].parentid)return o;var c,u=[],l=[],b=Object(s.a)(Array(a.length).keys()),j=Object(d.a)(Object(oe.zip)(a,b));try{for(j.s();!(c=j.n()).done;){var O=Object(f.a)(c.value,2),p=O[0],y=O[1];p.parentid==r[e].id&&(u.push(y),l.push(p))}}catch(C){j.e(C)}finally{j.f()}if(0==u.length)return o;console.log(u);var h=Math.min(u),g=a.splice(h,a.length-1);console.log(g),console.log(a),console.log(n),console.log(r[e]);var v=[].concat(Object(s.a)(n),Object(s.a)(a),[r[e]],l,Object(s.a)(i));return console.log(v),v}if(e>t){var Q=r.slice(0,t),w=r.slice(t,e),T=r.slice(e+1);return[].concat(Object(s.a)(Q),[r[e]],Object(s.a)(w),Object(s.a)(T))}return r}(e,t,r);h(n),W(!1)},B=Object(n.useState)(!0),U=Object(f.a)(B,2),m=U[0],W=U[1];return Object(I.jsxs)("div",{className:"OCTAVIA",children:[Object(I.jsx)("input",{type:"file",onChange:function(e){var t=e.target.files[0];console.log(t.name);var r=new FileReader;t.name.includes(".json")?r.onload=function(e){console.log(r.name);var t=JSON.parse(e.target.result),n=[];for(var a in t.template_query){var i=Math.floor(1e6*Math.random());if(1!=t.template_query[a].includes("@"))n.push({id:i,Query:t.template_query[a],BU:"",parentid:"no"});else{var o=t.template_query[a].substring(1);for(var c in n.push({id:i,Query:t.template_query[a],BU:"",parentid:"no"}),t[o])n.push({id:i+Math.floor(100*Math.random()),Query:t[o][c].Query,BU:t[o][c].BU,parentid:i})}}h(n)}:t.name.includes(".txt")?r.onload=function(e){var t=[],r=e.target.result.split(/\r?\n/);for(var n in r){var a=Math.floor(1e6*Math.random());""!=r[n].replace(/\s+/g,"")&&1!=r[n].startsWith("--")&&t.push({id:a,Query:r[n],BU:"",parentid:"no"})}h(t)}:alert("incorrect file type"),r.readAsBinaryString(t)}}),Object(I.jsx)(l.a,{title:"Query Editior",style:{width:"100%",margin:"0%"},icons:{Edit:function(){return Object(I.jsx)(ae.a,{style:{color:"black"}})},Delete:function(){return Object(I.jsx)(re.a,{style:{color:"black"}})},Check:function(){return Object(I.jsx)(G.a,{style:{color:"black","margin-left":"30px"}})},Clear:function(){return Object(I.jsx)(J.a,{style:{color:"black"}})}},editable:{onRowUpdate:function(e,t){return new Promise((function(r,n){setTimeout((function(){console.log(y);var n,a=Object(s.a)(y),i=Object(s.a)(y),o=Object(s.a)(Array(i.length).keys()),c=e.id,u="",l=e,b=Object(d.a)(Object(oe.zip)(i,o));try{for(b.s();!(n=b.n()).done;){var O=Object(f.a)(n.value,2),p=O[0],g=O[1];if(p.id==c){u=g;break}}}catch(v){b.e(v)}finally{b.f()}console.log(t),1==t.Query.startsWith("@")?(l.Query=e.Query.replace("@",""),l.Query="@"+l.Query):l.Query=e.Query.replace("@",""),(a=a.filter((function(t){return t.id!==e.id}))).splice(u,0,l),j(Object(s.a)(y)),h(a),W(!1),r()}),1e3)}))},onRowDelete:function(e,t){return new Promise((function(t,r){setTimeout((function(){var r=[e],n=Object(s.a)(y);r.forEach((function(e){n=n.filter((function(t){return t.id!==e.id}))}));var a=Object(s.a)(n);r.forEach((function(e){a=a.filter((function(t){return t.parentid==e.parentid}))})),console.log(a);var i=n;if("no"!=r[0].parentid)if(0==a.length)for(var o in n)r[0].parentid==n[o].id&&n[o].Query.startsWith("@")&&(n[o].Query=n[o].Query.substring(1));else console.log("pass");else i.forEach((function(e){n=n.filter((function(e){return e.parentid!==r[0].id}))}));j(Object(s.a)(y)),h(n),W(!1),t()}),1e3)}))}},columns:Q,data:y,parentChildData:function(e,t){return t.find((function(t){return t.id==e.parentid}))},options:{actionsCellStyle:{color:"black"},tableLayout:"auto",headerSelectionProps:{disabled:!0},headerStyle:{position:"sticky",top:1,backgroundColor:"#f7f7f7"},isLoading:!0,sorting:!1,paging:!1,padding:"dense",selection:!1,draggable:!0,selectionProps:function(e){return{disabled:!0}},rowStyle:function(e){e.tableData.isTreeExpanded;var t={transition:"transform 300ms"},r=1===e.tableData.path.length?0:e.tableData.path.length;return t=Object(c.a)(Object(c.a)({},t),{},{"--left-before":"".concat(6*r,"px")}),"no"!=e.parentid?{"text-indent":"20px","font-size":"12px","white-space":"pre",backgroundColor:"rgba(77, 93, 241, 0.08)"}:{"font-size":"12px","white-space":"pre"}}},localization:{header:{actions:"Actions"}},actions:[{icon:N.a,iconProps:{color:"secondary"},tooltip:"last step",onClick:function(){h(b),W(!0)},position:"toolbar",disabled:1==m},{icon:L.Export,tooltip:"export",iconProps:{style:{fontSize:"6px",color:"green"}},onClick:function(){Object(s.a)(y),w()},position:"toolbar"},{icon:function(){return Object(I.jsx)(Z.a,{style:{color:"black"}})},tooltip:"Add Rows",position:"row",onClick:function(e,t){if(j(Object(s.a)(y)),1!=(t=[t]).length)return alert('you can"t select more than one row when u add new row');var r=Object(s.a)(y),n=Object(s.a)(Array(r.length).keys()),a=Math.floor(1e6*Math.random()),i=t[0].id,o=t[0].parentid,c=[],u=void 0;for(var l in r)c.push(r[l].id);for(console.log("b");void 0!=u;)a=Math.floor(1e6*Math.random()),void 0==(u=c.find((function(e){return e==a})))&&(u=c.find((function(e){return e==a+1})));var b,O=Object(d.a)(Object(oe.zip)(r,n));try{for(O.s();!(b=O.n()).done;){var p=Object(f.a)(b.value,2),g=p[0],v=p[1];if(g.id==i){"no"!=t[0].parentid?r.splice(v+1,0,{id:a,Query:"-",BU:"-",parentid:o}):r.splice(v+1,0,{id:a,Query:"-",BU:"",parentid:"no"});break}}}catch(Q){O.e(Q)}finally{O.f()}setTimeout((function(){h(r),W(!1)}),500)}},function(e){return{icon:function(){var t="black";return null!=e.tableData.childRows&&(t="grey"),Object(I.jsx)(ee.a,{style:{color:t}})},tooltip:"Variation",position:"row",hidden:"no"!=e.parentid,onClick:T,disabled:null!=e.tableData.childRows}}],components:{Row:function(e){return Object(I.jsx)(u.MTableBodyRow,Object(c.a)(Object(c.a)({},e),{},{draggable:"true",onDoubleClick:function(t){e.actions[4]().onClick(t,e.data)},onDragStart:function(t){var r,n=Object(s.a)(y),a=Object(s.a)(Array(n.length).keys()),i=e.data.id,o=Object(d.a)(Object(oe.zip)(n,a));try{for(o.s();!(r=o.n()).done;){var c=Object(f.a)(r.value,2),u=c[0],l=c[1];if(u.id==i){C.row=l;break}}}catch(b){o.e(b)}finally{o.f()}},onDragEnter:function(t){var r,n=Object(s.a)(y),a=Object(s.a)(Array(n.length).keys()),i=e.data.id,o="",c=Object(d.a)(Object(oe.zip)(n,a));try{for(c.s();!(r=c.n()).done;){var u=Object(f.a)(r.value,2),l=u[0],b=u[1];if(l.id==i){o=b;break}}}catch(j){c.e(j)}finally{c.f()}o!==C.row&&(C.dropIndex=o)},onDragEnd:function(e){-1!==C.dropIndex&&x(C.row,C.dropIndex)}}))}}})]})};o.a.render(Object(I.jsx)(a.a.StrictMode,{children:Object(I.jsx)(ce,{})}),document.getElementById("root"))}},[[313,1,2]]]);
//# sourceMappingURL=main.0d74ceb0.chunk.js.map