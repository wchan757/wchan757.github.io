(this.webpackJsonpoctavia_material=this.webpackJsonpoctavia_material||[]).push([[0],{229:function(e,t,n){},307:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n.n(r),i=n(20),o=n.n(i),c=(n(229),n(16)),d=n(90),f=n(19),s=n(26),u=n(171),l=n.n(u),b=n(167),j=n.n(b),O=n(158),p=n.n(O),y=n(166),h=n.n(y),v=n(160),g=n.n(v),x=n(133),Q=n.n(x),w=n(134),B=n.n(w),U=n(120),m=n.n(U),C=n(165),R=n.n(C),T=n(163),k=n.n(T),E=n(162),S=n.n(E),M=n(161),W=n.n(M),A=n(157),D=n.n(A),P=n(164),_=n.n(P),z=n(159),H=n.n(z),L=n(156),q=n.n(L),F=n(14),I={Add:Object(r.forwardRef)((function(e,t){return Object(F.jsx)(j.a,Object(c.a)(Object(c.a)({},e),{},{ref:t}))})),Check:Object(r.forwardRef)((function(e,t){return Object(F.jsx)(h.a,Object(c.a)(Object(c.a)({},e),{},{ref:t}))})),Clear:Object(r.forwardRef)((function(e,t){return Object(F.jsx)(B.a,Object(c.a)(Object(c.a)({},e),{},{ref:t}))})),Delete:Object(r.forwardRef)((function(e,t){return Object(F.jsx)(m.a,Object(c.a)(Object(c.a)({},e),{},{ref:t}))})),DetailPanel:Object(r.forwardRef)((function(e,t){return Object(F.jsx)(Q.a,Object(c.a)(Object(c.a)({},e),{},{ref:t}))})),Edit:Object(r.forwardRef)((function(e,t){return Object(F.jsx)(R.a,Object(c.a)(Object(c.a)({},e),{},{ref:t}))})),Export:Object(r.forwardRef)((function(e,t){return Object(F.jsx)(_.a,Object(c.a)(Object(c.a)({},e),{},{ref:t}))})),Filter:Object(r.forwardRef)((function(e,t){return Object(F.jsx)(k.a,Object(c.a)(Object(c.a)({},e),{},{ref:t}))})),FirstPage:Object(r.forwardRef)((function(e,t){return Object(F.jsx)(S.a,Object(c.a)(Object(c.a)({},e),{},{ref:t}))})),LastPage:Object(r.forwardRef)((function(e,t){return Object(F.jsx)(W.a,Object(c.a)(Object(c.a)({},e),{},{ref:t}))})),NextPage:Object(r.forwardRef)((function(e,t){return Object(F.jsx)(Q.a,Object(c.a)(Object(c.a)({},e),{},{ref:t}))})),PreviousPage:Object(r.forwardRef)((function(e,t){return Object(F.jsx)(g.a,Object(c.a)(Object(c.a)({},e),{},{ref:t}))})),ResetSearch:Object(r.forwardRef)((function(e,t){return Object(F.jsx)(B.a,Object(c.a)(Object(c.a)({},e),{},{ref:t}))})),Search:Object(r.forwardRef)((function(e,t){return Object(F.jsx)(H.a,Object(c.a)(Object(c.a)({},e),{},{ref:t}))})),SortArrow:Object(r.forwardRef)((function(e,t){return Object(F.jsx)(p.a,Object(c.a)(Object(c.a)({},e),{},{ref:t}))})),ThirdStateCheck:Object(r.forwardRef)((function(e,t){return Object(F.jsx)(D.a,Object(c.a)(Object(c.a)({},e),{},{ref:t}))})),ViewColumn:Object(r.forwardRef)((function(e,t){return Object(F.jsx)(q.a,Object(c.a)(Object(c.a)({},e),{},{ref:t}))}))},J=n(203),N=n.n(J),V=n(202),Y=n.n(V),G=n(201),K=n.n(G),X=n(204),Z=n.n(X),$=n(205),ee=n.n($),te=n(200),ne=n.n(te),re=n(199),ae=n.n(re),ie=n(182),oe=(n(173),n(91)),ce=function(){var e=Object(r.useState)(!1),t=Object(s.a)(e,2),n=(t[0],t[1],Object(r.useState)([{id:0,Query:"SELECT * FROM",BU:"",parentid:"no"},{id:1,Query:"@bu_table",BU:"",parentid:"no"},{id:1,Query:"dsfsdfdsfdsf",BU:"Others",parentid:1},{id:2,Query:"dsfsdfdsfdsf",BU:"WTCMY",parentid:1},{id:3,Query:"dsfsdfdsfdsf",BU:"WTCTH",parentid:1},{id:4,Query:"WHERE condition",BU:"",parentid:"no"},{id:5,Query:"@bu",BU:"",parentid:"no"},{id:6,Query:"dsfsdfdsfdsf",BU:"WTCTW",parentid:5},{id:7,Query:"dsfsdfdsfdsf",BU:"Others",parentid:5},{id:8,Query:"dsfsdfdsfdsf",BU:"WTCTH",parentid:5}])),a=Object(s.a)(n,2),i=(a[0],a[1],Object(r.useState)([{id:0,Query:"SELECT * FROM",BU:"",parentid:"no"},{id:1,Query:"@bu_table",BU:"",parentid:"no"},{id:1,Query:"dsfsdfdsfdsf",BU:"Others",parentid:1},{id:2,Query:"dsfsdfdsfdsf",BU:"WTCMY",parentid:1},{id:3,Query:"dsfsdfdsfdsf",BU:"WTCTH",parentid:1},{id:4,Query:"WHERE condition",BU:"",parentid:"no"},{id:5,Query:"@bu",BU:"",parentid:"no"},{id:6,Query:"dsfsdfdsfdsf",BU:"WTCTW",parentid:5},{id:7,Query:"dsfsdfdsfdsf",BU:"Others",parentid:5},{id:8,Query:"dsfsdfdsfdsf",BU:"WTCTH",parentid:5}])),o=Object(s.a)(i,2),b=o[0],j=o[1],O=Object(r.useState)([{id:0,Query:"SELECT * FROM",BU:"",parentid:"no"},{id:1,Query:"@bu_table",BU:"",parentid:"no"},{id:1,Query:"dsfsdfdsfdsf",BU:"Others",parentid:1},{id:2,Query:"dsfsdfdsfdsf",BU:"WTCMY",parentid:1},{id:3,Query:"dsfsdfdsfdsf",BU:"WTCTH",parentid:1},{id:4,Query:"WHERE condition",BU:"",parentid:"no"},{id:5,Query:"@bu",BU:"",parentid:"no"},{id:6,Query:"dsfsdfdsfdsf",BU:"WTCTW",parentid:5},{id:7,Query:"dsfsdfdsfdsf",BU:"Others",parentid:5},{id:8,Query:"dsfsdfdsfdsf",BU:"WTCTH",parentid:5}]),p=Object(s.a)(O,2),y=p[0],h=p[1],v=Object(r.useState)([{title:"Query",field:"Query",editable:"always",cellStyle:{textAlign:"centre"},editComponent:function(e){var t="";return t=e.value.startsWith("@")?e.value.substring(1):e.value,Object(F.jsx)(ie.a,{value:t,onChange:function(t){return e.onChange(t.target.value)}})}},{title:"BU",field:"BU",editable:"always",textAlign:"centre"}]),g=Object(s.a)(v,2),x=g[0],Q=(g[1],function(){var e=Object(f.a)(y),t=[],n={};for(var r in e)"no"==e[r].parentid&&t.push(e[r].Query);for(var r in e)if(1==e[r].Query.includes("@")){var a=e[r].Query.substring(1);for(var i in n[a]=[],e)e[i].parentid==e[r].id&&n[a].push({BU:e[i].BU,Query:e[i].Query})}n.template_query=t;var o=JSON.stringify(n),c=new Blob([o],{type:"text/plain"}),d=URL.createObjectURL(c),s=document.createElement("a");s.download="master.json",s.href=d,s.click()}),w=function(e,t){j(Object(f.a)(y));for(var n=Object(f.a)(y),r=t.id,a=Math.floor(1e6*Math.random()),i=[],o=void 0,c="";void 0!=o;)a=Math.floor(1e6*Math.random()),void 0==(o=i.find((function(e){return e==a})))&&(o=i.find((function(e){return e==a+1})));for(var d in n.push({id:a,Query:"-",BU:"-",parentid:r}),n)c=n[d].Query,n[d].id==r&1!=n[d].Query.includes("@")&&(n[d].Query="@"+c);setTimeout((function(){h(n),T(!1)}),500)},B={row:-1,dropIndex:-1},U=function(e,t){j(Object(f.a)(y));var n=y;if("no"==n[e].parentid&"no"==n[t].parentid);else{if(!("no"!=n[e].parentid&"no"!=n[t].parentid))return;if(n[e].parentid!=n[t].parentid)return}var r=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];if(e<t){console.log("to higher");var r=n.slice(0,e),a=n.slice(e+1,t+1),i=n.slice(t+1),o=[].concat(Object(f.a)(r),Object(f.a)(a),[n[e]],Object(f.a)(i));if("no"!=n[e].parentid)return o;var c,u=[],l=[],b=Object(f.a)(Array(a.length).keys()),j=Object(d.a)(Object(oe.zip)(a,b));try{for(j.s();!(c=j.n()).done;){var O=Object(s.a)(c.value,2),p=O[0],y=O[1];p.parentid==n[e].id&&(u.push(y),l.push(p))}}catch(B){j.e(B)}finally{j.f()}if(0==u.length)return o;console.log(u);var h=Math.min(u),v=a.splice(h,a.length-1);console.log(v),console.log(a),console.log(r),console.log(n[e]);var g=[].concat(Object(f.a)(r),Object(f.a)(a),[n[e]],l,Object(f.a)(i));return console.log(g),g}if(e>t){var x=n.slice(0,t),Q=n.slice(t,e),w=n.slice(e+1);return[].concat(Object(f.a)(x),[n[e]],Object(f.a)(Q),Object(f.a)(w))}return n}(e,t,n);h(r),T(!1)},m=Object(r.useState)(!0),C=Object(s.a)(m,2),R=C[0],T=C[1];return Object(F.jsxs)("div",{className:"OCTAVIA",children:[Object(F.jsx)("input",{type:"file",onChange:function(e){var t=e.target.files[0],n=new FileReader;n.onload=function(e){var t=JSON.parse(e.target.result),n=[];for(var r in t.template_query){var a=Math.floor(1e6*Math.random());if(1!=t.template_query[r].includes("@"))n.push({id:a,Query:t.template_query[r],BU:"",parentid:"no"});else{var i=t.template_query[r].substring(1);for(var o in n.push({id:a,Query:t.template_query[r],BU:"",parentid:"no"}),t[i])n.push({id:a+Math.floor(100*Math.random()),Query:t[i][o].Query,BU:t[i][o].BU,parentid:a})}}h(n)},n.readAsBinaryString(t)}}),Object(F.jsx)(l.a,{title:"Query Editior",style:{width:"100%",margin:"0%"},icons:{Edit:function(){return Object(F.jsx)(ae.a,{style:{color:"black"}})},Delete:function(){return Object(F.jsx)(ne.a,{style:{color:"black"}})},Check:function(){return Object(F.jsx)(K.a,{style:{color:"black","margin-left":"30px"}})},Clear:function(){return Object(F.jsx)(Y.a,{style:{color:"black"}})}},editable:{onRowUpdate:function(e,t){return new Promise((function(t,n){setTimeout((function(){console.log(y);var n,r=Object(f.a)(y),a=Object(f.a)(y),i=Object(f.a)(Array(a.length).keys()),o=e.id,c="",u=Object(d.a)(Object(oe.zip)(a,i));try{for(u.s();!(n=u.n()).done;){var l=Object(s.a)(n.value,2),b=l[0],O=l[1];if(b.id==o){c=O;break}}}catch(p){u.e(p)}finally{u.f()}(r=r.filter((function(t){return t.id!==e.id}))).splice(c,0,e),j(Object(f.a)(y)),h(r),T(!1),t()}),1e3)}))},onRowDelete:function(e,t,n,r){return new Promise((function(t,n){setTimeout((function(){var n=[e],r=Object(f.a)(y);console.log(n),n.forEach((function(e){r=r.filter((function(t){return t.id!==e.id}))}));var a=r;"no"!=n[0].parentid?(console.log("pass"),h(r)):a.forEach((function(e){r=r.filter((function(e){return e.parentid!==n[0].id}))})),j(Object(f.a)(y)),h(r),T(!1),t()}),1e3)}))}},columns:x,data:y,parentChildData:function(e,t){return t.find((function(t){return t.id==e.parentid}))},options:{actionsCellStyle:{color:"black"},tableLayout:"auto",headerSelectionProps:{disabled:!0},headerStyle:{position:"sticky",top:1,backgroundColor:"#f7f7f7"},isLoading:!0,sorting:!1,paging:!1,padding:"dense",selection:!1,draggable:!0,selectionProps:function(e){return{disabled:!0}},rowStyle:function(e){e.tableData.isTreeExpanded;var t={transition:"transform 300ms"},n=1===e.tableData.path.length?0:e.tableData.path.length;return t=Object(c.a)(Object(c.a)({},t),{},{"--left-before":"".concat(6*n,"px")}),"no"!=e.parentid?{"text-indent":"20px","font-size":"12px",backgroundColor:"rgba(77, 93, 241, 0.08)"}:{"font-size":"12px"}}},localization:{header:{actions:"Actions"}},actions:[{icon:N.a,iconProps:{color:"secondary"},tooltip:"last step",onClick:function(){h(b),T(!0)},position:"toolbar",disabled:1==R},{icon:I.Export,tooltip:"export",iconProps:{style:{fontSize:"6px",color:"green"}},onClick:function(){Object(f.a)(y),Q()},position:"toolbar"},{icon:function(){return Object(F.jsx)(Z.a,{style:{color:"black"}})},tooltip:"Add Rows",position:"row",onClick:function(e,t){if(j(Object(f.a)(y)),1!=(t=[t]).length)return alert('you can"t select more than one row when u add new row');var n=Object(f.a)(y),r=Object(f.a)(Array(n.length).keys()),a=Math.floor(1e6*Math.random()),i=t[0].id,o=t[0].parentid,c=[],u=void 0;for(var l in n)c.push(n[l].id);for(console.log("b");void 0!=u;)a=Math.floor(1e6*Math.random()),void 0==(u=c.find((function(e){return e==a})))&&(u=c.find((function(e){return e==a+1})));var b,O=Object(d.a)(Object(oe.zip)(n,r));try{for(O.s();!(b=O.n()).done;){var p=Object(s.a)(b.value,2),v=p[0],g=p[1];if(v.id==i){"no"!=t[0].parentid?n.splice(g+1,0,{id:a,Query:"-",BU:"-",parentid:o}):n.splice(g+1,0,{id:a,Query:"-",BU:"",parentid:"no"});break}}}catch(x){O.e(x)}finally{O.f()}setTimeout((function(){h(n),T(!1)}),500)}},function(e){return{icon:function(){return Object(F.jsx)(ee.a,{style:{color:"black"}})},tooltip:"Variation",position:"row",hidden:"no"!=e.parentid,onClick:w,disabled:null!=e.tableData.childRows}}],components:{Row:function(e){return Object(F.jsx)(u.MTableBodyRow,Object(c.a)(Object(c.a)({},e),{},{draggable:"true",onDoubleClick:function(t){e.actions[4]().onClick(t,e.data)},onDragStart:function(t){var n,r=Object(f.a)(y),a=Object(f.a)(Array(r.length).keys()),i=e.data.id,o=Object(d.a)(Object(oe.zip)(r,a));try{for(o.s();!(n=o.n()).done;){var c=Object(s.a)(n.value,2),u=c[0],l=c[1];if(u.id==i){B.row=l;break}}}catch(b){o.e(b)}finally{o.f()}},onDragEnter:function(t){var n,r=Object(f.a)(y),a=Object(f.a)(Array(r.length).keys()),i=e.data.id,o="",c=Object(d.a)(Object(oe.zip)(r,a));try{for(c.s();!(n=c.n()).done;){var u=Object(s.a)(n.value,2),l=u[0],b=u[1];if(l.id==i){o=b;break}}}catch(j){c.e(j)}finally{c.f()}o!==B.row&&(B.dropIndex=o)},onDragEnd:function(e){-1!==B.dropIndex&&U(B.row,B.dropIndex)}}))}}})]})};o.a.render(Object(F.jsx)(a.a.StrictMode,{children:Object(F.jsx)(ce,{})}),document.getElementById("root"))}},[[307,1,2]]]);
//# sourceMappingURL=main.1842fa63.chunk.js.map