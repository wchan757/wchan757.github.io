(this.webpackJsonpoctavia_material=this.webpackJsonpoctavia_material||[]).push([[0],{271:function(e,t,n){},331:function(e,t,n){},371:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n.n(r),o=n(17),i=n.n(o),c=(n(271),n(29)),s=n(103),d=n(18),u=n(19),f=n(30),l=n(194),b=n.n(l),p=n(190),j=n.n(p),O=n(180),y=n.n(O),h=n(189),g=n.n(h),v=n(182),T=n.n(v),C=n(152),E=n.n(C),w=n(153),S=n.n(w),x=n(188),Q=n.n(x),U=n(187),R=n.n(U),B=n(185),W=n.n(B),m=n(184),k=n.n(m),M=n(183),A=n.n(M),I=n(179),N=n.n(I),H=n(186),L=n.n(H),P=n(181),D=n.n(P),z=n(178),_=n.n(z),q=n(15),F={Add:Object(r.forwardRef)((function(e,t){return Object(q.jsx)(j.a,Object(u.a)(Object(u.a)({},e),{},{ref:t}))})),Check:Object(r.forwardRef)((function(e,t){return Object(q.jsx)(g.a,Object(u.a)(Object(u.a)({},e),{},{ref:t}))})),Clear:Object(r.forwardRef)((function(e,t){return Object(q.jsx)(S.a,Object(u.a)(Object(u.a)({},e),{},{ref:t}))})),Delete:Object(r.forwardRef)((function(e,t){return Object(q.jsx)(Q.a,Object(u.a)(Object(u.a)({},e),{},{ref:t}))})),DetailPanel:Object(r.forwardRef)((function(e,t){return Object(q.jsx)(E.a,Object(u.a)(Object(u.a)({},e),{},{ref:t}))})),Edit:Object(r.forwardRef)((function(e,t){return Object(q.jsx)(R.a,Object(u.a)(Object(u.a)({},e),{},{ref:t}))})),Export:Object(r.forwardRef)((function(e,t){return Object(q.jsx)(L.a,Object(u.a)(Object(u.a)({},e),{},{ref:t}))})),Filter:Object(r.forwardRef)((function(e,t){return Object(q.jsx)(W.a,Object(u.a)(Object(u.a)({},e),{},{ref:t}))})),FirstPage:Object(r.forwardRef)((function(e,t){return Object(q.jsx)(k.a,Object(u.a)(Object(u.a)({},e),{},{ref:t}))})),LastPage:Object(r.forwardRef)((function(e,t){return Object(q.jsx)(A.a,Object(u.a)(Object(u.a)({},e),{},{ref:t}))})),NextPage:Object(r.forwardRef)((function(e,t){return Object(q.jsx)(E.a,Object(u.a)(Object(u.a)({},e),{},{ref:t}))})),PreviousPage:Object(r.forwardRef)((function(e,t){return Object(q.jsx)(T.a,Object(u.a)(Object(u.a)({},e),{},{ref:t}))})),ResetSearch:Object(r.forwardRef)((function(e,t){return Object(q.jsx)(S.a,Object(u.a)(Object(u.a)({},e),{},{ref:t}))})),Search:Object(r.forwardRef)((function(e,t){return Object(q.jsx)(D.a,Object(u.a)(Object(u.a)({},e),{},{ref:t}))})),SortArrow:Object(r.forwardRef)((function(e,t){return Object(q.jsx)(y.a,Object(u.a)(Object(u.a)({},e),{},{ref:t}))})),ThirdStateCheck:Object(r.forwardRef)((function(e,t){return Object(q.jsx)(N.a,Object(u.a)(Object(u.a)({},e),{},{ref:t}))})),ViewColumn:Object(r.forwardRef)((function(e,t){return Object(q.jsx)(_.a,Object(u.a)(Object(u.a)({},e),{},{ref:t}))}))},K=["ALL","AND","AS","ASC","APPROXIMATE","AVG","BETWEEN","BY","CACHE","CAST","COUNT","DESC","DISTINCT","FALSE","FIRST","LAST","FROM","FULL","GROUP","HAVING","IF","IN","INNER","INSERT","INTO","IS","JOIN","LEFT","LIMIT","MAX","MIN","NOT","NULL","ON","OR","OVERWRITE","LIKE","RLIKE","UPPER","LOWER","REGEXP","ORDER","OUTER","RIGHT","SELECT","SEMI","STRING","SUM","TABLE","TIMESTAMP","TRUE","UNCACHE","UNION","WHERE","INTERSECT","EXCEPT","SUBSTR","SUBSTRING","SQRT","ABS","CAST","WITH","CROSS","CONCAT","THEN","WHEN","NVL","CASE","ELSE","END","COALESCE"],G=(n(331),n(242)),V=n.n(G),Y=n(232),J=n(241),X=n.n(J),Z=n(240),$=n.n(Z),ee=n(239),te=n.n(ee),ne=n(243),re=n.n(ne),ae=n(244),oe=n.n(ae),ie=n(238),ce=n.n(ie),se=n(237),de=n.n(se),ue=n(457),fe=n(233),le=n(234),be=n(104),pe=n(235),je=n.n(pe),Oe=n(236),ye=n.n(Oe),he=n(118),ge=n(453),ve=function(){var e=Object(Y.a)(0,{useCheckpoints:!0}),t=Object(f.a)(e,2),n=t[0],a=t[1],o=a.set,i=(a.reset,a.undo,a.redo,a.canUndo,a.canRedo,n.present,Object(ge.a)({tableRow:{"& td":{"flex-basis":"0","box-sizing":"none",fontsize:"12",padding:"none",overflow:!0}}})(),function(e){e.autoEscape,e.caseSensitive,e.sanitize;var t=e.searchWords,n=e.textToHighlight,r=[],a=n.toLowerCase(),o=a.split(/[-\s(),]+/),i=0,c=o.map((function(e){var t=a.indexOf(e,i);return i=t+e.length,{word:e,index:t}}));return t.forEach((function(e){var t=e.toLowerCase();if(c.forEach((function(e){if(e.word==t){var n=e.index,a=e.index+e.word.length;r.push({start:n,end:a})}else if(e.word.startsWith("@")){var o=e.index,i=e.index+e.word.length;r.push({start:o,end:i})}})),a==t){var n=t.length;r.push({start:0,end:n})}})),r}),p=Object(r.useState)(!1),j=Object(f.a)(p,2),O=(j[0],j[1],Object(r.useState)(null)),y=Object(f.a)(O,2),h=y[0],g=y[1],v=Object(r.useState)([{id:0,Query:"SELECT * FROM",BU:"",parentid:"no"},{id:1,Query:"@bu_table",BU:"",parentid:"no"},{id:1,Query:"dsfsdfdsfdsf",BU:"Others",parentid:1},{id:2,Query:"dsfsdfdsfdsf",BU:"WTCMY",parentid:1},{id:3,Query:"dsfsdfdsfdsf",BU:"WTCTH",parentid:1},{id:4,Query:"WHERE condition",BU:"",parentid:"no"},{id:5,Query:"@bu",BU:"",parentid:"no"},{id:6,Query:"dsfsdfdsfdsf",BU:"WTCTW",parentid:5},{id:7,Query:"dsfsdfdsfdsf",BU:"Others",parentid:5},{id:8,Query:"dsfsdfdsfdsf",BU:"WTCTH",parentid:5}]),T=Object(f.a)(v,2),C=(T[0],T[1],Object(r.useState)([{id:0,Query:"SELECT * FROM",BU:"",parentid:"no"},{id:1,Query:"@bu_table",BU:"",parentid:"no"},{id:2,Query:"dsfsdfdsfdsf",BU:"Others",parentid:1},{id:3,Query:"dsfsdfdsfdsf",BU:"WTCMY",parentid:1},{id:4,Query:"dsfsdfdsfdsf",BU:"WTCTH",parentid:1},{id:5,Query:"WHERE condition",BU:"",parentid:"no"},{id:6,Query:"@bu",BU:"",parentid:"no"},{id:7,Query:"dsfsdfdsfdsf",BU:"WTCTW",parentid:6},{id:8,Query:"dsfsdfdsfdsf",BU:"Others",parentid:6},{id:9,Query:"dsfsdfdsfdsf",BU:"WTCTH",parentid:6}])),E=Object(f.a)(C,2),w=E[0],S=E[1],x=Object(r.useState)([{id:0,Query:"SELECT * FROM",BU:"",parentid:"no"},{id:1,Query:"@bu_table",BU:"",parentid:"no"},{id:2,Query:"dsfsdfdsfdsf",BU:"Others",parentid:1},{id:3,Query:"dsfsdfdsfdsf",BU:"WTCMY",parentid:1},{id:4,Query:"dsfsdfdsfdsf",BU:"WTCTH",parentid:1},{id:5,Query:"WHERE condition",BU:"",parentid:"no"},{id:6,Query:"@bu",BU:"",parentid:"no"},{id:7,Query:"dsfsdfdsfdsf",BU:"WTCTW",parentid:6},{id:8,Query:"dsfsdfdsfdsf",BU:"Others",parentid:6},{id:9,Query:"dsfsdfdsfdsf",BU:"WTCTH",parentid:6}]),Q=Object(f.a)(x,2),U=Q[0],R=Q[1],B="",W=Object(r.useState)([{title:"Query",field:"Query",editComponent:function(e){var t="";return t=e.value.includes("@")?e.value.replace("@",""):e.value,Object(q.jsx)(ue.a,Object(u.a)(Object(u.a)({},e),{},{padding:"none",InputProps:{style:{fontSize:"12px"}},size:"small",multiline:!0,Margin:"nomral",fullWidth:!0,value:t,autofocus:!0,onKeyUp:function(e){9==e.keyCode&&e.target.setSelectionRange(B.length,B.length)},onKeyDown:function(t){t.target.selectionStart,t.target.selectionEnd;console.log(t.target),9==t.keyCode&&(B=t.target.value.slice(0,t.target.selectionStart)+"    ",e.onChange(t.target.value.slice(0,t.target.selectionStart)+"    "+t.target.value.slice(t.target.selectionStart,t.target.value.length)),t.target.setSelectionRange(1,1),console.log(B),t.preventDefault())},onFocus:function(e){},onChange:function(t){e.onChange(t.target.value)}}))},render:function(e){return Object(q.jsx)(je.a,{autoEscape:!0,className:"modify",searchWords:K,textToHighlight:e.Query,findChunks:i,highlightStyle:{color:e.Query.startsWith("@")?"#f2d273":"#32CD32","background-color":"transparent","font-size":"12px","font-weight":"900","text-transform":"uppercase"},unhighlightStyle:{"font-size":"12px"}})}},{title:"BU",field:"BU",textAlign:"centre",editable:function(e,t){return"no"!=t.parentid},lookup:{None:"",Others:"Others",FTRTH:"FTRHK",PNSHK:"PNSHK",WTCHK:"WTCHK",WTCID:"WTCID",WTCPH:"WTCPH",WWHK:"WWHK",WTCTW:"WTCTW",WTCMY:"WTCMY",WTCTH:"WTCTH",WTCSG:"WTCSG"}}]),m=Object(f.a)(W,2),k=m[0],M=(m[1],function(e){var t=Object(d.a)(U),n=[],r={},a=["ftrhk","pnshk","wtchk","wtcid","wtcph","wwhk","wtctw","wtcmy","wtcth","wtcsg"],o=[],i="",c="nothing",s="nothing";for(var u in a)o.push(a[u].toUpperCase());for(var f in t)"no"==t[f].parentid&&n.push(t[f].Query);for(var f in t)if(1==t[f].Query.includes("@")){var l=t[f].Query.substring(1);for(var b in r[l]=[],t)t[b].parentid==t[f].id&&r[l].push({BU:t[b].BU,Query:t[b].Query})}for(var p in r["@bu_query"]={},o)for(var j in r["@bu_query"][o[p]]=[],n)if(c="nothing",s="nothing",1==n[j].includes("@")){for(var O in r[i=n[j].substring(1)])r[i][O].BU==o[p]&&(c=r[i][O].Query),"Others"==r[i][O].BU&&(s=r[i][O].Query);"nothing"==c?r["@bu_query"][o[p]].push(s):r["@bu_query"][o[p]].push(c)}else r["@bu_query"][o[p]].push(n[j]);r.template_query=n;var y=JSON.stringify(r);if("bu_only"==e){var h=new fe;for(var g in o){var v=r["@bu_query"][o[g]];v=v.join("\r\n");h.file(a[g]+".sql",v)}h.generateAsync({type:"blob"}).then((function(e){Object(le.saveAs)(e,"sql_query.zip")}))}else{if("validate"==e)return y;var T=new Blob([y],{type:"text/plain"}),C=URL.createObjectURL(T),E=document.createElement("a");E.download="Master.json",E.href=C,E.click()}}),A=function(e,t){o(Object(d.a)(U),!0),S(Object(d.a)(U));for(var n=Object(d.a)(U),r=t.id,a=Math.floor(1e6*Math.random()),i=[],c=void 0,s=Object(he.d)({dictionaries:[he.a,he.c,he.b]});void 0!=c;)a=Math.floor(1e6*Math.random()),void 0==(c=i.find((function(e){return e==a})))&&(c=i.find((function(e){return e==a+1})));for(var u in n.push({id:a,Query:t.Query,BU:"Others",parentid:r}),n)n[u].Query,n[u].id==r&1!=n[u].Query.includes("@")&&(n[u].Query="@"+s);setTimeout((function(){R(n),D(!1)}),500)},I={row:-1,dropIndex:-1},N=function(e,t){o(Object(d.a)(U),!0),S(Object(d.a)(U));var n=U;if("no"==n[e].parentid&"no"==n[t].parentid);else{if(!("no"!=n[e].parentid&"no"!=n[t].parentid))return;if(n[e].parentid!=n[t].parentid)return}var r=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];if(e<t){console.log("to higher");var r=n.slice(0,e),a=n.slice(e+1,t+1),o=n.slice(t+1),i=[].concat(Object(d.a)(r),Object(d.a)(a),[n[e]],Object(d.a)(o));if("no"!=n[e].parentid)return i;var c,u=[],l=[],b=Object(d.a)(Array(a.length).keys()),p=Object(s.a)(Object(be.zip)(a,b));try{for(p.s();!(c=p.n()).done;){var j=Object(f.a)(c.value,2),O=j[0],y=j[1];O.parentid==n[e].id&&(u.push(y),l.push(O))}}catch(w){p.e(w)}finally{p.f()}if(0==u.length)return i;console.log(u);var h=Math.min(u),g=a.splice(h,a.length-1);console.log(g),console.log(a),console.log(r),console.log(n[e]);var v=[].concat(Object(d.a)(r),Object(d.a)(a),[n[e]],l,Object(d.a)(o));return console.log(v),v}if(e>t){var T=n.slice(0,t),C=n.slice(t,e),E=n.slice(e+1);return[].concat(Object(d.a)(T),[n[e]],Object(d.a)(C),Object(d.a)(E))}return n}(e,t,n);R(r),D(!1)},H=Object(r.useState)(!0),L=Object(f.a)(H,2),P=L[0],D=L[1];return Object(q.jsxs)("div",{className:"OCTAVIA",children:[Object(q.jsx)("input",{type:"file",onChange:function(e){var t=e.target.files[0];console.log(t.name);var n=new FileReader;t.name.includes(".json")?n.onload=function(e){console.log(n.name);var t=JSON.parse(e.target.result),r=[];for(var a in t.template_query){var o=Math.floor(1e6*Math.random());if(1!=t.template_query[a].includes("@"))r.push({id:o,Query:t.template_query[a],BU:"",parentid:"no"});else{var i=t.template_query[a].substring(1);for(var c in r.push({id:o,Query:t.template_query[a],BU:"",parentid:"no"}),t[i])r.push({id:o+Math.floor(100*Math.random()),Query:t[i][c].Query,BU:t[i][c].BU,parentid:o})}}R(r)}:t.name.includes(".txt")?n.onload=function(e){var t=[],n=e.target.result.split(/\r?\n/);for(var r in n){var a=Math.floor(1e6*Math.random());""!=n[r].replace(/\s+/g,"")&&t.push({id:a,Query:n[r],BU:"",parentid:"no"})}R(t)}:alert("incorrect file type"),n.readAsBinaryString(t)}}),Object(q.jsx)(b.a,{title:"Query Editior",style:{width:"100%",margin:"0%",fontsize:"12px"},icons:{Edit:function(){return Object(q.jsx)(de.a,{})},Delete:function(){return Object(q.jsx)(ce.a,{style:{color:"black"}})},Check:function(){return Object(q.jsx)(te.a,{style:{color:"black","margin-left":"30px"}})},Clear:function(){return Object(q.jsx)($.a,{style:{color:"black"}})}},editable:{isEditable:function(e){try{if(1!=e.Query.startsWith("@"))return"always"}catch(t){return}},onRowUpdate:function(e,t){return new Promise((function(n,r){setTimeout((function(){o(Object(d.a)(U),!0);var r=Object(d.a)(U),a=Object(d.a)(U),i=Object(d.a)(U),c=Object(d.a)(Array(a.length).keys()),u=e.id,l="",b=e,p=!1,j=r;for(var O in i)i[O].id==e.id&&(i[O].BU=e.BU);i.forEach((function(e){var t=[],n=i.filter((function(t){return e.id==t.parentid||e.id==t.id}));n.forEach((function(e){t.push(e.BU)}));var r=new Set(t).size;console.log(r),console.log(t),r==t.length&n.length>=1?console.log("ok"):(console.log("issue"),p=!0)}));var y,h=Object(s.a)(Object(be.zip)(a,c));try{for(h.s();!(y=h.n()).done;){var g=Object(f.a)(y.value,2),v=g[0],T=g[1];if(v.id==u){l=T;break}}}catch(E){h.e(E)}finally{h.f()}if(1==t.Query.startsWith("@")?(b.Query=e.Query.replace("@",""),b.Query="@"+b.Query):b.Query=e.Query.replace("@",""),(r=r.filter((function(t){return t.id!==e.id}))).splice(l,0,b),1==p)for(var C in alert("BU can't appear more than one time in same series of row"),j)r[C].id==t.id&&(r[C].BU=t.BU);S(Object(d.a)(U)),R(r),D(!1),n(),console.log(r)}),1e3)}))},onRowDelete:function(e,t){return new Promise((function(t,n){setTimeout((function(){var n=[e],r=Object(d.a)(U);n.forEach((function(e){r=r.filter((function(t){return t.id!==e.id}))}));var a=Object(d.a)(r);n.forEach((function(e){a=a.filter((function(t){return t.parentid==e.parentid}))})),console.log(a);var o=r;if("no"!=n[0].parentid)if(0==a.length)for(var i in r)n[0].parentid==r[i].id&&r[i].Query.startsWith("@")&&(r[i].Query=r[i].Query.substring(1));else console.log("pass");else o.forEach((function(e){r=r.filter((function(e){return e.parentid!==n[0].id}))}));S(Object(d.a)(U)),R(r),D(!1),t()}),1e3)}))}},columns:k,data:U,parentChildData:function(e,t){return t.find((function(t){return t.id==e.parentid}))},onRowClick:function(e,t){return g(t.tableData.id)},options:{loadingType:"linear",tableLayout:"auto",headerSelectionProps:{disabled:!0},headerStyle:{position:"sticky",top:1,backgroundColor:"#f7f7f7"},isLoading:!0,sorting:!1,paging:!1,padding:"dense",selection:!1,draggable:!0,selectionProps:function(e){return{disabled:!0}},rowStyle:function(e){var t;e.tableData.isTreeExpanded;return"no"!=e.parentid?(t={backgroundColor:h===e.tableData.id?"#EEE":"#FFF"},Object(c.a)(t,"backgroundColor","rgba(77, 93, 241, 0.08)"),Object(c.a)(t,"font-size","12px"),Object(c.a)(t,"white-space","pre"),t):{"font-size":"12px","white-space":"pre"}}},localization:{body:{editRow:{deleteText:"You Sure?",fontSize:"10px"}}},actions:[{icon:X.a,iconProps:{color:"secondary"},tooltip:"last step",onClick:function(){R(w),D(!0)},position:"toolbar",disabled:1==P},{icon:V.a,iconProps:{color:"secondary"},tooltip:"export bu query zip file",onClick:function(){M("bu_only")},position:"toolbar"},{icon:F.Export,tooltip:"export master file",iconProps:{style:{fontSize:"6px",color:"green"}},onClick:function(){Object(d.a)(U),M("install")},position:"toolbar"},{icon:F.ViewColumn,tooltip:"Query Validate",iconProps:{style:{fontSize:"6px",color:"green"}},onClick:function(e){var t=JSON.parse(M("validate"))["@bu_query"].WTCTW.join(" ");ye.a.post("https://extendsclass.com/sql-syntax-tester",t,{headers:{"Content-Type":"text/plain"}}).then((function(e){console.log(e.data)})),e.preventDefault()},position:"toolbar"},{icon:function(){return Object(q.jsx)(re.a,{style:{color:"black"}})},tooltip:"Add Rows",position:"row",onClick:function(e,t){if(S(Object(d.a)(U)),1!=(t=[t]).length)return alert('you can"t select more than one row when u add new row');var n=Object(d.a)(U),r=Object(d.a)(Array(n.length).keys()),a=Math.floor(1e6*Math.random()),o=t[0].id,i=t[0].parentid,c=[],u=void 0;for(var l in n)c.push(n[l].id);for(console.log("b");void 0!=u;)a=Math.floor(1e6*Math.random()),void 0==(u=c.find((function(e){return e==a})))&&(u=c.find((function(e){return e==a+1})));var b,p=Object(s.a)(Object(be.zip)(n,r));try{for(p.s();!(b=p.n()).done;){var j=Object(f.a)(b.value,2),O=j[0],y=j[1];if(O.id==o){"no"!=t[0].parentid?n.splice(y+1,0,{id:a,Query:"-",BU:"-",parentid:i}):n.splice(y+1,0,{id:a,Query:"-",BU:"",parentid:"no"});break}}}catch(h){p.e(h)}finally{p.f()}setTimeout((function(){R(n),D(!1)}),500)},isLoading:!0},function(e){return{icon:function(){var t="black";return null!=e.tableData.childRows&&(t="grey"),Object(q.jsx)(oe.a,{style:{color:t,background:"transparent"}})},tooltip:"Variation",position:"row",hidden:"no"!=e.parentid,onClick:A,disabled:null!=e.tableData.childRows}}],components:{Row:function(e){return Object(q.jsx)(l.MTableBodyRow,Object(u.a)(Object(u.a)({},e),{},{draggable:"true",onDoubleClick:function(t){e.data.Query.startsWith("@")||e.actions[5]().onClick(t,e.data)},onDragStart:function(t){var n,r=Object(d.a)(U),a=Object(d.a)(Array(r.length).keys()),o=e.data.id,i=Object(s.a)(Object(be.zip)(r,a));try{for(i.s();!(n=i.n()).done;){var c=Object(f.a)(n.value,2),u=c[0],l=c[1];if(u.id==o){I.row=l;break}}}catch(b){i.e(b)}finally{i.f()}},onDragEnter:function(t){var n,r=Object(d.a)(U),a=Object(d.a)(Array(r.length).keys()),o=e.data.id,i="",c=Object(s.a)(Object(be.zip)(r,a));try{for(c.s();!(n=c.n()).done;){var u=Object(f.a)(n.value,2),l=u[0],b=u[1];if(l.id==o){i=b;break}}}catch(p){c.e(p)}finally{c.f()}i!==I.row&&(I.dropIndex=i)},onDragEnd:function(e){-1!==I.dropIndex&&N(I.row,I.dropIndex)}}))}}})]})};i.a.render(Object(q.jsx)(a.a.StrictMode,{children:Object(q.jsx)(ve,{})}),document.getElementById("root"))}},[[371,1,2]]]);
//# sourceMappingURL=main.82380ad5.chunk.js.map