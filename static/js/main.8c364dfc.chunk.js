(this.webpackJsonpoctavia_material=this.webpackJsonpoctavia_material||[]).push([[0],{213:function(e,t,r){},289:function(e,t,r){"use strict";r.r(t);var n=r(0),a=r.n(n),i=r(18),d=r.n(i),o=(r(213),r(17)),c=r(86),f=r(20),s=r(41),u=r(164),b=r.n(u),j=r(170),O=r(160),l=r.n(O),p=r(150),y=r.n(p),h=r(159),v=r.n(h),g=r(152),U=r.n(g),B=r(127),Q=r.n(B),w=r(128),x=r.n(w),R=r(158),T=r.n(R),m=r(157),C=r.n(m),E=r(155),S=r.n(E),W=r(154),k=r.n(W),M=r(153),L=r.n(M),A=r(149),P=r.n(A),_=r(156),H=r.n(_),N=r(151),D=r.n(N),F=r(148),q=r.n(F),z=r(19),I={Add:Object(n.forwardRef)((function(e,t){return Object(z.jsx)(l.a,Object(o.a)(Object(o.a)({},e),{},{ref:t}))})),Check:Object(n.forwardRef)((function(e,t){return Object(z.jsx)(v.a,Object(o.a)(Object(o.a)({},e),{},{ref:t}))})),Clear:Object(n.forwardRef)((function(e,t){return Object(z.jsx)(x.a,Object(o.a)(Object(o.a)({},e),{},{ref:t}))})),Delete:Object(n.forwardRef)((function(e,t){return Object(z.jsx)(T.a,Object(o.a)(Object(o.a)({},e),{},{ref:t}))})),DetailPanel:Object(n.forwardRef)((function(e,t){return Object(z.jsx)(Q.a,Object(o.a)(Object(o.a)({},e),{},{ref:t}))})),Edit:Object(n.forwardRef)((function(e,t){return Object(z.jsx)(C.a,Object(o.a)(Object(o.a)({},e),{},{ref:t}))})),Export:Object(n.forwardRef)((function(e,t){return Object(z.jsx)(H.a,Object(o.a)(Object(o.a)({},e),{},{ref:t}))})),Filter:Object(n.forwardRef)((function(e,t){return Object(z.jsx)(S.a,Object(o.a)(Object(o.a)({},e),{},{ref:t}))})),FirstPage:Object(n.forwardRef)((function(e,t){return Object(z.jsx)(k.a,Object(o.a)(Object(o.a)({},e),{},{ref:t}))})),LastPage:Object(n.forwardRef)((function(e,t){return Object(z.jsx)(L.a,Object(o.a)(Object(o.a)({},e),{},{ref:t}))})),NextPage:Object(n.forwardRef)((function(e,t){return Object(z.jsx)(Q.a,Object(o.a)(Object(o.a)({},e),{},{ref:t}))})),PreviousPage:Object(n.forwardRef)((function(e,t){return Object(z.jsx)(U.a,Object(o.a)(Object(o.a)({},e),{},{ref:t}))})),ResetSearch:Object(n.forwardRef)((function(e,t){return Object(z.jsx)(x.a,Object(o.a)(Object(o.a)({},e),{},{ref:t}))})),Search:Object(n.forwardRef)((function(e,t){return Object(z.jsx)(D.a,Object(o.a)(Object(o.a)({},e),{},{ref:t}))})),SortArrow:Object(n.forwardRef)((function(e,t){return Object(z.jsx)(y.a,Object(o.a)(Object(o.a)({},e),{},{ref:t}))})),ThirdStateCheck:Object(n.forwardRef)((function(e,t){return Object(z.jsx)(P.a,Object(o.a)(Object(o.a)({},e),{},{ref:t}))})),ViewColumn:Object(n.forwardRef)((function(e,t){return Object(z.jsx)(q.a,Object(o.a)(Object(o.a)({},e),{},{ref:t}))}))},J=(r(166),r(87)),Y=function(){var e=Object(n.useState)(!1),t=Object(s.a)(e,2),r=t[0],a=(t[1],Object(n.useState)([{id:0,Query:"SELECT * FROM",BU:"",parentid:"no"},{id:1,Query:"@bu_table",BU:"",parentid:"no"},{id:1,Query:"dsfsdfdsfdsf",BU:"Others",parentid:1},{id:2,Query:"dsfsdfdsfdsf",BU:"WTCMY",parentid:1},{id:3,Query:"dsfsdfdsfdsf",BU:"WTCTH",parentid:1},{id:4,Query:"WHERE condition",BU:"",parentid:"no"},{id:5,Query:"@bu",BU:"",parentid:"no"},{id:6,Query:"dsfsdfdsfdsf",BU:"WTCTW",parentid:5},{id:7,Query:"dsfsdfdsfdsf",BU:"Others",parentid:5},{id:8,Query:"dsfsdfdsfdsf",BU:"WTCTH",parentid:5}])),i=Object(s.a)(a,2),d=(i[0],i[1],Object(n.useState)([{id:0,Query:"SELECT * FROM",BU:"",parentid:"no"},{id:1,Query:"@bu_table",BU:"",parentid:"no"},{id:1,Query:"dsfsdfdsfdsf",BU:"Others",parentid:1},{id:2,Query:"dsfsdfdsfdsf",BU:"WTCMY",parentid:1},{id:3,Query:"dsfsdfdsfdsf",BU:"WTCTH",parentid:1},{id:4,Query:"WHERE condition",BU:"",parentid:"no"},{id:5,Query:"@bu",BU:"",parentid:"no"},{id:6,Query:"dsfsdfdsfdsf",BU:"WTCTW",parentid:5},{id:7,Query:"dsfsdfdsfdsf",BU:"Others",parentid:5},{id:8,Query:"dsfsdfdsfdsf",BU:"WTCTH",parentid:5}])),O=Object(s.a)(d,2),l=O[0],p=O[1],y=Object(n.useState)([{id:0,Query:"SELECT * FROM",BU:"",parentid:"no"},{id:1,Query:"@bu_table",BU:"",parentid:"no"},{id:1,Query:"dsfsdfdsfdsf",BU:"Others",parentid:1},{id:2,Query:"dsfsdfdsfdsf",BU:"WTCMY",parentid:1},{id:3,Query:"dsfsdfdsfdsf",BU:"WTCTH",parentid:1},{id:4,Query:"WHERE condition",BU:"",parentid:"no"},{id:5,Query:"@bu",BU:"",parentid:"no"},{id:6,Query:"dsfsdfdsfdsf",BU:"WTCTW",parentid:5},{id:7,Query:"dsfsdfdsfdsf",BU:"Others",parentid:5},{id:8,Query:"dsfsdfdsfdsf",BU:"WTCTH",parentid:5}]),h=Object(s.a)(y,2),v=h[0],g=h[1],U=Object(n.useState)([{title:"Query",field:"Query"},{title:"BU",field:"BU"}]),B=Object(s.a)(U,2),Q=B[0],w=(B[1],function(){var e=Object(f.a)(v),t=[],r={};for(var n in e)"no"==e[n].parentid&&t.push(e[n].Query);for(var n in e)if(1==e[n].Query.includes("@")){var a=e[n].Query.substring(1);for(var i in r[a]=[],e)e[i].parentid==e[n].id&&r[a].push({BU:e[i].BU,Query:e[i].Query})}r.template_query=t;var d=JSON.stringify(r),o=new Blob([d],{type:"text/plain"}),c=URL.createObjectURL(o),s=document.createElement("a");s.download="master.json",s.href=c,s.click()}),x={row:-1,dropIndex:-1},R=function(e,t){p(Object(f.a)(v));var r=v;if("no"==r[e].parentid&"no"==r[t].parentid);else{if(!("no"!=r[e].parentid&"no"!=r[t].parentid))return;if(r[e].parentid!=r[t].parentid)return}var n=function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];if(e<t){console.log("to higher");var n=r.slice(0,e),a=r.slice(e+1,t+1),i=r.slice(t+1),d=[].concat(Object(f.a)(n),Object(f.a)(a),[r[e]],Object(f.a)(i));if("no"!=r[e].parentid)return d;var o,u=[],b=[],j=Object(f.a)(Array(a.length).keys()),O=Object(c.a)(Object(J.zip)(a,j));try{for(O.s();!(o=O.n()).done;){var l=Object(s.a)(o.value,2),p=l[0],y=l[1];p.parentid==r[e].id&&(u.push(y),b.push(p))}}catch(w){O.e(w)}finally{O.f()}if(0==u.length)return d;console.log(u);var h=Math.min(u),v=a.splice(h,a.length-1);console.log(v),console.log(a),console.log(n),console.log(r[e]);var g=[].concat(Object(f.a)(n),Object(f.a)(a),[r[e]],b,Object(f.a)(i));return console.log(g),g}if(e>t){var U=r.slice(0,t),B=r.slice(t,e),Q=r.slice(e+1);return[].concat(Object(f.a)(U),[r[e]],Object(f.a)(B),Object(f.a)(Q))}return r}(e,t,r);g(n),E(!1)},T=Object(n.useState)(!0),m=Object(s.a)(T,2),C=m[0],E=m[1];return Object(z.jsxs)("div",{className:"OCTAVIA",children:[Object(z.jsx)("input",{type:"file",onChange:function(e){var t=e.target.files[0],r=new FileReader;r.onload=function(e){var t=JSON.parse(e.target.result),r=[];for(var n in t.template_query){var a=Math.floor(1e6*Math.random());if(1!=t.template_query[n].includes("@"))r.push({id:a,Query:t.template_query[n],BU:"",parentid:"no"});else{var i=t.template_query[n].substring(1);for(var d in r.push({id:a,Query:t.template_query[n],BU:"",parentid:"no"}),t[i])r.push({id:a+Math.floor(100*Math.random()),Query:t[i][d].Query,BU:t[i][d].BU,parentid:a})}}g(r)},r.readAsBinaryString(t)}}),r?Object(z.jsx)("div",{style:{width:200,height:200},children:Object(z.jsx)(j.a,{value:66})}):Object(z.jsx)(b.a,{title:"Query Editior",editable:{onRowUpdate:function(e,t,r,n){return new Promise((function(t,r){setTimeout((function(){var r,n=Object(f.a)(v),a=Object(f.a)(v),i=Object(f.a)(Array(a.length).keys()),d=e.id,o="",u=Object(c.a)(Object(J.zip)(a,i));try{for(u.s();!(r=u.n()).done;){var b=Object(s.a)(r.value,2),j=b[0],O=b[1];if(j.id==d){o=O;break}}}catch(l){u.e(l)}finally{u.f()}console.log("test"),console.log(o),(n=n.filter((function(t){return t.id!==e.id}))).splice(o,0,e),p(Object(f.a)(v)),g(n),E(!1),t()}),1e3)}))},onRowDelete:function(e,t,r,n){return new Promise((function(t,r){setTimeout((function(){var r=[e],n=Object(f.a)(v);console.log(r),r.forEach((function(e){n=n.filter((function(t){return t.id!==e.id}))}));var a=n;"no"!=r[0].parentid?(console.log("pass"),g(n)):a.forEach((function(e){n=n.filter((function(e){return e.parentid!==r[0].id}))})),p(Object(f.a)(v)),g(n),E(!1),t()}),1e3)}))}},columns:Q,data:v,parentChildData:function(e,t){return t.find((function(t){return t.id==e.parentid}))},icons:I,options:{headerSelectionProps:{disabled:!0},isLoading:!0,sorting:!0,paging:!1,padding:"dense",selection:!0,draggable:!1,selectionProps:function(e){return{disabled:!0}},rowStyle:{fontSize:12}},actions:[{icon:I.FirstPage,tooltip:"last step",onClick:function(){g(l),E(!0)},position:"toolbar",disabled:1==C},{icon:I.Export,tooltip:"export",onClick:function(){Object(f.a)(v),w()},position:"toolbar"},{icon:I.Add,tooltip:"Add Rows",position:"row",onClick:function(e,t){if(p(Object(f.a)(v)),1!=(t=[t]).length)return alert('you can"t select more than one row when u add new row');var r=Object(f.a)(v),n=Object(f.a)(Array(r.length).keys()),a=Math.floor(1e6*Math.random()),i=t[0].id,d=t[0].parentid,o=[],u=void 0;for(var b in r)o.push(r[b].id);for(console.log("b");void 0!=u;)a=Math.floor(1e6*Math.random()),void 0==(u=o.find((function(e){return e==a})))&&(u=o.find((function(e){return e==a+1})));var j,O=Object(c.a)(Object(J.zip)(r,n));try{for(O.s();!(j=O.n()).done;){var l=Object(s.a)(j.value,2),y=l[0],h=l[1];if(y.id==i){"no"!=t[0].parentid?r.splice(h+1,0,{id:a,Query:"haha",BU:"NULL",parentid:d}):r.splice(h+1,0,{id:a,Query:"NULL",BU:"",parentid:"no"},{id:a+1,Query:"NULL",BU:"NULL",parentid:a});break}}}catch(U){O.e(U)}finally{O.f()}setTimeout((function(){g(r),E(!1)}),500)}}],components:{Row:function(e){return Object(z.jsx)(u.MTableBodyRow,Object(o.a)(Object(o.a)({},e),{},{draggable:"true",onDragStart:function(t){var r,n=Object(f.a)(v),a=Object(f.a)(Array(n.length).keys()),i=e.data.id,d=Object(c.a)(Object(J.zip)(n,a));try{for(d.s();!(r=d.n()).done;){var o=Object(s.a)(r.value,2),u=o[0],b=o[1];if(u.id==i){x.row=b;break}}}catch(j){d.e(j)}finally{d.f()}},onDragEnter:function(t){var r,n=Object(f.a)(v),a=Object(f.a)(Array(n.length).keys()),i=e.data.id,d="",o=Object(c.a)(Object(J.zip)(n,a));try{for(o.s();!(r=o.n()).done;){var u=Object(s.a)(r.value,2),b=u[0],j=u[1];if(b.id==i){d=j;break}}}catch(O){o.e(O)}finally{o.f()}d!==x.row&&(x.dropIndex=d)},onDragEnd:function(e){-1!==x.dropIndex&&R(x.row,x.dropIndex)}}))}}})]})};d.a.render(Object(z.jsxs)(a.a.StrictMode,{children:[Object(z.jsx)(Y,{}),","]}),document.getElementById("root"))}},[[289,1,2]]]);
//# sourceMappingURL=main.8c364dfc.chunk.js.map