(this.webpackJsonpoctavia_material=this.webpackJsonpoctavia_material||[]).push([[0],{213:function(e,t,r){},289:function(e,t,r){"use strict";r.r(t);var n=r(0),a=r.n(n),i=r(18),o=r.n(i),d=(r(213),r(15)),c=r(86),f=r(19),s=r(41),u=r(164),b=r.n(u),j=r(160),l=r.n(j),O=r(150),p=r.n(O),y=r(159),h=r.n(y),g=r(152),v=r.n(g),U=r(127),B=r.n(U),Q=r(128),w=r.n(Q),x=r(158),R=r.n(x),m=r(157),T=r.n(m),C=r(155),E=r.n(C),S=r(154),k=r.n(S),W=r(153),M=r.n(W),L=r(149),A=r.n(L),P=r(156),_=r.n(P),D=r(151),H=r.n(D),z=r(148),N=r.n(z),F=r(21),q={Add:Object(n.forwardRef)((function(e,t){return Object(F.jsx)(l.a,Object(d.a)(Object(d.a)({},e),{},{ref:t}))})),Check:Object(n.forwardRef)((function(e,t){return Object(F.jsx)(h.a,Object(d.a)(Object(d.a)({},e),{},{ref:t}))})),Clear:Object(n.forwardRef)((function(e,t){return Object(F.jsx)(w.a,Object(d.a)(Object(d.a)({},e),{},{ref:t}))})),Delete:Object(n.forwardRef)((function(e,t){return Object(F.jsx)(R.a,Object(d.a)(Object(d.a)({},e),{},{ref:t}))})),DetailPanel:Object(n.forwardRef)((function(e,t){return Object(F.jsx)(B.a,Object(d.a)(Object(d.a)({},e),{},{ref:t}))})),Edit:Object(n.forwardRef)((function(e,t){return Object(F.jsx)(T.a,Object(d.a)(Object(d.a)({},e),{},{ref:t}))})),Export:Object(n.forwardRef)((function(e,t){return Object(F.jsx)(_.a,Object(d.a)(Object(d.a)({},e),{},{ref:t}))})),Filter:Object(n.forwardRef)((function(e,t){return Object(F.jsx)(E.a,Object(d.a)(Object(d.a)({},e),{},{ref:t}))})),FirstPage:Object(n.forwardRef)((function(e,t){return Object(F.jsx)(k.a,Object(d.a)(Object(d.a)({},e),{},{ref:t}))})),LastPage:Object(n.forwardRef)((function(e,t){return Object(F.jsx)(M.a,Object(d.a)(Object(d.a)({},e),{},{ref:t}))})),NextPage:Object(n.forwardRef)((function(e,t){return Object(F.jsx)(B.a,Object(d.a)(Object(d.a)({},e),{},{ref:t}))})),PreviousPage:Object(n.forwardRef)((function(e,t){return Object(F.jsx)(v.a,Object(d.a)(Object(d.a)({},e),{},{ref:t}))})),ResetSearch:Object(n.forwardRef)((function(e,t){return Object(F.jsx)(w.a,Object(d.a)(Object(d.a)({},e),{},{ref:t}))})),Search:Object(n.forwardRef)((function(e,t){return Object(F.jsx)(H.a,Object(d.a)(Object(d.a)({},e),{},{ref:t}))})),SortArrow:Object(n.forwardRef)((function(e,t){return Object(F.jsx)(p.a,Object(d.a)(Object(d.a)({},e),{},{ref:t}))})),ThirdStateCheck:Object(n.forwardRef)((function(e,t){return Object(F.jsx)(A.a,Object(d.a)(Object(d.a)({},e),{},{ref:t}))})),ViewColumn:Object(n.forwardRef)((function(e,t){return Object(F.jsx)(N.a,Object(d.a)(Object(d.a)({},e),{},{ref:t}))}))},I=(r(166),r(87)),J=function(){var e=Object(n.useState)(!1),t=Object(s.a)(e,2),r=(t[0],t[1],Object(n.useState)([{id:0,Query:"SELECT * FROM",BU:"",parentid:"no"},{id:1,Query:"@bu_table",BU:"",parentid:"no"},{id:1,Query:"dsfsdfdsfdsf",BU:"Others",parentid:1},{id:2,Query:"dsfsdfdsfdsf",BU:"WTCMY",parentid:1},{id:3,Query:"dsfsdfdsfdsf",BU:"WTCTH",parentid:1},{id:4,Query:"WHERE condition",BU:"",parentid:"no"},{id:5,Query:"@bu",BU:"",parentid:"no"},{id:6,Query:"dsfsdfdsfdsf",BU:"WTCTW",parentid:5},{id:7,Query:"dsfsdfdsfdsf",BU:"Others",parentid:5},{id:8,Query:"dsfsdfdsfdsf",BU:"WTCTH",parentid:5}])),a=Object(s.a)(r,2),i=(a[0],a[1],Object(n.useState)([{id:0,Query:"SELECT * FROM",BU:"",parentid:"no"},{id:1,Query:"@bu_table",BU:"",parentid:"no"},{id:1,Query:"dsfsdfdsfdsf",BU:"Others",parentid:1},{id:2,Query:"dsfsdfdsfdsf",BU:"WTCMY",parentid:1},{id:3,Query:"dsfsdfdsfdsf",BU:"WTCTH",parentid:1},{id:4,Query:"WHERE condition",BU:"",parentid:"no"},{id:5,Query:"@bu",BU:"",parentid:"no"},{id:6,Query:"dsfsdfdsfdsf",BU:"WTCTW",parentid:5},{id:7,Query:"dsfsdfdsfdsf",BU:"Others",parentid:5},{id:8,Query:"dsfsdfdsfdsf",BU:"WTCTH",parentid:5}])),o=Object(s.a)(i,2),j=o[0],l=o[1],O=Object(n.useState)([{id:0,Query:"SELECT * FROM",BU:"",parentid:"no"},{id:1,Query:"@bu_table",BU:"",parentid:"no"},{id:1,Query:"dsfsdfdsfdsf",BU:"Others",parentid:1},{id:2,Query:"dsfsdfdsfdsf",BU:"WTCMY",parentid:1},{id:3,Query:"dsfsdfdsfdsf",BU:"WTCTH",parentid:1},{id:4,Query:"WHERE condition",BU:"",parentid:"no"},{id:5,Query:"@bu",BU:"",parentid:"no"},{id:6,Query:"dsfsdfdsfdsf",BU:"WTCTW",parentid:5},{id:7,Query:"dsfsdfdsfdsf",BU:"Others",parentid:5},{id:8,Query:"dsfsdfdsfdsf",BU:"WTCTH",parentid:5}]),p=Object(s.a)(O,2),y=p[0],h=p[1],g=Object(n.useState)([{title:"Query",field:"Query",editable:"always",cellStyle:{textAlign:"centre"}},{title:"BU",field:"BU",editable:"always",textAlign:"centre"}]),v=Object(s.a)(g,2),U=v[0],B=(v[1],function(){var e=Object(f.a)(y),t=[],r={};for(var n in e)"no"==e[n].parentid&&t.push(e[n].Query);for(var n in e)if(1==e[n].Query.includes("@")){var a=e[n].Query.substring(1);for(var i in r[a]=[],e)e[i].parentid==e[n].id&&r[a].push({BU:e[i].BU,Query:e[i].Query})}r.template_query=t;var o=JSON.stringify(r),d=new Blob([o],{type:"text/plain"}),c=URL.createObjectURL(d),s=document.createElement("a");s.download="master.json",s.href=c,s.click()}),Q={row:-1,dropIndex:-1},w=function(e,t){l(Object(f.a)(y));var r=y;if("no"==r[e].parentid&"no"==r[t].parentid);else{if(!("no"!=r[e].parentid&"no"!=r[t].parentid))return;if(r[e].parentid!=r[t].parentid)return}var n=function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];if(e<t){console.log("to higher");var n=r.slice(0,e),a=r.slice(e+1,t+1),i=r.slice(t+1),o=[].concat(Object(f.a)(n),Object(f.a)(a),[r[e]],Object(f.a)(i));if("no"!=r[e].parentid)return o;var d,u=[],b=[],j=Object(f.a)(Array(a.length).keys()),l=Object(c.a)(Object(I.zip)(a,j));try{for(l.s();!(d=l.n()).done;){var O=Object(s.a)(d.value,2),p=O[0],y=O[1];p.parentid==r[e].id&&(u.push(y),b.push(p))}}catch(w){l.e(w)}finally{l.f()}if(0==u.length)return o;console.log(u);var h=Math.min(u),g=a.splice(h,a.length-1);console.log(g),console.log(a),console.log(n),console.log(r[e]);var v=[].concat(Object(f.a)(n),Object(f.a)(a),[r[e]],b,Object(f.a)(i));return console.log(v),v}if(e>t){var U=r.slice(0,t),B=r.slice(t,e),Q=r.slice(e+1);return[].concat(Object(f.a)(U),[r[e]],Object(f.a)(B),Object(f.a)(Q))}return r}(e,t,r);h(n),T(!1)},x=Object(n.useState)(!0),R=Object(s.a)(x,2),m=R[0],T=R[1];return Object(F.jsxs)("div",{className:"OCTAVIA",children:[Object(F.jsx)("input",{type:"file",onChange:function(e){var t=e.target.files[0],r=new FileReader;r.onload=function(e){var t=JSON.parse(e.target.result),r=[];for(var n in t.template_query){var a=Math.floor(1e6*Math.random());if(1!=t.template_query[n].includes("@"))r.push({id:a,Query:t.template_query[n],BU:"",parentid:"no"});else{var i=t.template_query[n].substring(1);for(var o in r.push({id:a,Query:t.template_query[n],BU:"",parentid:"no"}),t[i])r.push({id:a+Math.floor(100*Math.random()),Query:t[i][o].Query,BU:t[i][o].BU,parentid:a})}}h(r)},r.readAsBinaryString(t)}}),Object(F.jsx)(b.a,{title:"Query Editior",style:{width:"100%",margin:"0%"},editable:{onRowUpdate:function(e,t){return new Promise((function(t,r){setTimeout((function(){var r,n=Object(f.a)(y),a=Object(f.a)(y),i=Object(f.a)(Array(a.length).keys()),o=e.id,d="",u=Object(c.a)(Object(I.zip)(a,i));try{for(u.s();!(r=u.n()).done;){var b=Object(s.a)(r.value,2),j=b[0],O=b[1];if(j.id==o){d=O;break}}}catch(p){u.e(p)}finally{u.f()}(n=n.filter((function(t){return t.id!==e.id}))).splice(d,0,e),l(Object(f.a)(y)),h(n),T(!1),t()}),1e3)}))},onRowDelete:function(e,t,r,n){return new Promise((function(t,r){setTimeout((function(){var r=[e],n=Object(f.a)(y);console.log(r),r.forEach((function(e){n=n.filter((function(t){return t.id!==e.id}))}));var a=n;"no"!=r[0].parentid?(console.log("pass"),h(n)):a.forEach((function(e){n=n.filter((function(e){return e.parentid!==r[0].id}))})),l(Object(f.a)(y)),h(n),T(!1),t()}),1e3)}))}},columns:U,data:y,parentChildData:function(e,t){return t.find((function(t){return t.id==e.parentid}))},icons:q,options:{tableLayout:"auto",headerSelectionProps:{disabled:!0},headerStyle:{position:"sticky",top:1,backgroundColor:"#f7f7f7"},isLoading:!0,sorting:!1,paging:!1,padding:"dense",selection:!1,draggable:!0,selectionProps:function(e){return{disabled:!0}},rowStyle:function(e){e.tableData.isTreeExpanded;console.log(e);var t={transition:"transform 300ms"},r=1===e.tableData.path.length?0:e.tableData.path.length;return t=Object(d.a)(Object(d.a)({},t),{},{"--left-before":"".concat(6*r,"px")}),"no"!=e.parentid?{"text-indent":"20px","font-size":"6px",backgroundColor:"rgba(77, 93, 241, 0.08)"}:{"font-size":"8px"}}},localization:{header:{actions:"Actions"}},actions:[{icon:q.FirstPage,tooltip:"last step",onClick:function(){h(j),T(!0)},position:"toolbar",disabled:1==m},{icon:q.Export,tooltip:"export",onClick:function(){Object(f.a)(y),B()},position:"toolbar"},{icon:q.Add,tooltip:"Add Rows",position:"row",onClick:function(e,t){if(l(Object(f.a)(y)),1!=(t=[t]).length)return alert('you can"t select more than one row when u add new row');var r=Object(f.a)(y),n=Object(f.a)(Array(r.length).keys()),a=Math.floor(1e6*Math.random()),i=t[0].id,o=t[0].parentid,d=[],u=void 0;for(var b in r)d.push(r[b].id);for(console.log("b");void 0!=u;)a=Math.floor(1e6*Math.random()),void 0==(u=d.find((function(e){return e==a})))&&(u=d.find((function(e){return e==a+1})));var j,O=Object(c.a)(Object(I.zip)(r,n));try{for(O.s();!(j=O.n()).done;){var p=Object(s.a)(j.value,2),g=p[0],v=p[1];if(g.id==i){"no"!=t[0].parentid?r.splice(v+1,0,{id:a,Query:"haha",BU:"NULL",parentid:o}):r.splice(v+1,0,{id:a,Query:"NULL",BU:"",parentid:"no"},{id:a+1,Query:"NULL",BU:"NULL",parentid:a});break}}}catch(U){O.e(U)}finally{O.f()}setTimeout((function(){h(r),T(!1)}),500)}}],components:{Row:function(e){return Object(F.jsx)(u.MTableBodyRow,Object(d.a)(Object(d.a)({},e),{},{draggable:"true",onDragStart:function(t){var r,n=Object(f.a)(y),a=Object(f.a)(Array(n.length).keys()),i=e.data.id,o=Object(c.a)(Object(I.zip)(n,a));try{for(o.s();!(r=o.n()).done;){var d=Object(s.a)(r.value,2),u=d[0],b=d[1];if(u.id==i){Q.row=b;break}}}catch(j){o.e(j)}finally{o.f()}},onDragEnter:function(t){var r,n=Object(f.a)(y),a=Object(f.a)(Array(n.length).keys()),i=e.data.id,o="",d=Object(c.a)(Object(I.zip)(n,a));try{for(d.s();!(r=d.n()).done;){var u=Object(s.a)(r.value,2),b=u[0],j=u[1];if(b.id==i){o=j;break}}}catch(l){d.e(l)}finally{d.f()}o!==Q.row&&(Q.dropIndex=o)},onDragEnd:function(e){-1!==Q.dropIndex&&w(Q.row,Q.dropIndex)}}))}}})]})};o.a.render(Object(F.jsx)(a.a.StrictMode,{children:Object(F.jsx)(J,{})}),document.getElementById("root"))}},[[289,1,2]]]);
//# sourceMappingURL=main.b6f4648b.chunk.js.map