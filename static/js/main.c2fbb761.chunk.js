(this.webpackJsonpoctavia_material=this.webpackJsonpoctavia_material||[]).push([[0],{241:function(e,t,r){},338:function(e,t,r){"use strict";r.r(t);var n=r(0),a=r.n(n),o=r(20),i=r.n(o),c=(r(241),r(25)),d=r(16),s=r(91),u=r(19),f=r(27),l=r(174),b=r.n(l),j=r(170),O=r.n(j),p=r(161),y=r.n(p),h=r(169),T=r.n(h),g=r(163),v=r.n(g),C=r(136),w=r.n(C),E=r(137),Q=r.n(E),R=r(123),x=r.n(R),U=r(168),S=r.n(U),B=r(166),W=r.n(B),m=r(165),k=r.n(m),I=r(164),M=r.n(I),A=r(160),N=r.n(A),H=r(167),L=r.n(H),P=r(162),D=r.n(P),F=r(159),_=r.n(F),q=r(14),z={Add:Object(n.forwardRef)((function(e,t){return Object(q.jsx)(O.a,Object(d.a)(Object(d.a)({},e),{},{ref:t}))})),Check:Object(n.forwardRef)((function(e,t){return Object(q.jsx)(T.a,Object(d.a)(Object(d.a)({},e),{},{ref:t}))})),Clear:Object(n.forwardRef)((function(e,t){return Object(q.jsx)(Q.a,Object(d.a)(Object(d.a)({},e),{},{ref:t}))})),Delete:Object(n.forwardRef)((function(e,t){return Object(q.jsx)(x.a,Object(d.a)(Object(d.a)({},e),{},{ref:t}))})),DetailPanel:Object(n.forwardRef)((function(e,t){return Object(q.jsx)(w.a,Object(d.a)(Object(d.a)({},e),{},{ref:t}))})),Edit:Object(n.forwardRef)((function(e,t){return Object(q.jsx)(S.a,Object(d.a)(Object(d.a)({},e),{},{ref:t}))})),Export:Object(n.forwardRef)((function(e,t){return Object(q.jsx)(L.a,Object(d.a)(Object(d.a)({},e),{},{ref:t}))})),Filter:Object(n.forwardRef)((function(e,t){return Object(q.jsx)(W.a,Object(d.a)(Object(d.a)({},e),{},{ref:t}))})),FirstPage:Object(n.forwardRef)((function(e,t){return Object(q.jsx)(k.a,Object(d.a)(Object(d.a)({},e),{},{ref:t}))})),LastPage:Object(n.forwardRef)((function(e,t){return Object(q.jsx)(M.a,Object(d.a)(Object(d.a)({},e),{},{ref:t}))})),NextPage:Object(n.forwardRef)((function(e,t){return Object(q.jsx)(w.a,Object(d.a)(Object(d.a)({},e),{},{ref:t}))})),PreviousPage:Object(n.forwardRef)((function(e,t){return Object(q.jsx)(v.a,Object(d.a)(Object(d.a)({},e),{},{ref:t}))})),ResetSearch:Object(n.forwardRef)((function(e,t){return Object(q.jsx)(Q.a,Object(d.a)(Object(d.a)({},e),{},{ref:t}))})),Search:Object(n.forwardRef)((function(e,t){return Object(q.jsx)(D.a,Object(d.a)(Object(d.a)({},e),{},{ref:t}))})),SortArrow:Object(n.forwardRef)((function(e,t){return Object(q.jsx)(y.a,Object(d.a)(Object(d.a)({},e),{},{ref:t}))})),ThirdStateCheck:Object(n.forwardRef)((function(e,t){return Object(q.jsx)(N.a,Object(d.a)(Object(d.a)({},e),{},{ref:t}))})),ViewColumn:Object(n.forwardRef)((function(e,t){return Object(q.jsx)(_.a,Object(d.a)(Object(d.a)({},e),{},{ref:t}))}))},G=["ALL","AND","AS","ASC","APPROXIMATE","AVG","BETWEEN","BY","CACHE","CAST","COUNT","DESC","DISTINCT","FALSE","FIRST","LAST","FROM","FULL","GROUP","HAVING","IF","IN","INNER","INSERT","INTO","IS","JOIN","LEFT","LIMIT","MAX","MIN","NOT","NULL","ON","OR","OVERWRITE","LIKE","RLIKE","UPPER","LOWER","REGEXP","ORDER","OUTER","RIGHT","SELECT","SEMI","STRING","SUM","TABLE","TIMESTAMP","TRUE","UNCACHE","UNION","WHERE","INTERSECT","EXCEPT","SUBSTR","SUBSTRING","SQRT","ABS","CAST","WITH","CROSS","CONCAT"],K=r(215),V=r.n(K),J=r(214),Y=r.n(J),X=r(213),Z=r.n(X),$=r(216),ee=r.n($),te=r(217),re=r.n(te),ne=r(212),ae=r.n(ne),oe=r(211),ie=r.n(oe),ce=r(184),de=(r(306),r(92)),se=r(209),ue=r.n(se),fe=r(210),le=r.n(fe),be=function(){var e=function(e){e.autoEscape,e.caseSensitive,e.sanitize;var t=e.searchWords,r=e.textToHighlight,n=[],a=r.toLowerCase(),o=a.split(/[-\s]+/),i=0,c=o.map((function(e){var t=a.indexOf(e,i);return i=t,{word:e,index:t}}));return t.forEach((function(e){var t=e.toLowerCase();if(c.forEach((function(e){if(e.word==t||e.word.startsWith("@")||e.word.startsWith(t+"(")){var r=e.index,a=e.index+t.length;n.push({start:r,end:a})}})),a==t){var r=t.length;n.push({start:0,end:r})}})),n},t=Object(n.useState)(!1),r=Object(f.a)(t,2),a=(r[0],r[1],Object(n.useState)(null)),o=Object(f.a)(a,2),i=o[0],j=o[1],O=Object(n.useState)([{id:0,Query:"SELECT * FROM",BU:"",parentid:"no"},{id:1,Query:"@bu_table",BU:"",parentid:"no"},{id:1,Query:"dsfsdfdsfdsf",BU:"Others",parentid:1},{id:2,Query:"dsfsdfdsfdsf",BU:"WTCMY",parentid:1},{id:3,Query:"dsfsdfdsfdsf",BU:"WTCTH",parentid:1},{id:4,Query:"WHERE condition",BU:"",parentid:"no"},{id:5,Query:"@bu",BU:"",parentid:"no"},{id:6,Query:"dsfsdfdsfdsf",BU:"WTCTW",parentid:5},{id:7,Query:"dsfsdfdsfdsf",BU:"Others",parentid:5},{id:8,Query:"dsfsdfdsfdsf",BU:"WTCTH",parentid:5}]),p=Object(f.a)(O,2),y=(p[0],p[1],Object(n.useState)([{id:0,Query:"SELECT * FROM",BU:"",parentid:"no"},{id:1,Query:"@bu_table",BU:"",parentid:"no"},{id:2,Query:"dsfsdfdsfdsf",BU:"Others",parentid:1},{id:3,Query:"dsfsdfdsfdsf",BU:"WTCMY",parentid:1},{id:4,Query:"dsfsdfdsfdsf",BU:"WTCTH",parentid:1},{id:5,Query:"WHERE condition",BU:"",parentid:"no"},{id:6,Query:"@bu",BU:"",parentid:"no"},{id:7,Query:"dsfsdfdsfdsf",BU:"WTCTW",parentid:6},{id:8,Query:"dsfsdfdsfdsf",BU:"Others",parentid:6},{id:9,Query:"dsfsdfdsfdsf",BU:"WTCTH",parentid:6}])),h=Object(f.a)(y,2),T=h[0],g=h[1],v=Object(n.useState)([{id:0,Query:"SELECT * FROM",BU:"",parentid:"no"},{id:1,Query:"@bu_table",BU:"",parentid:"no"},{id:2,Query:"dsfsdfdsfdsf",BU:"Others",parentid:1},{id:3,Query:"dsfsdfdsfdsf",BU:"WTCMY",parentid:1},{id:4,Query:"dsfsdfdsfdsf",BU:"WTCTH",parentid:1},{id:5,Query:"WHERE condition",BU:"",parentid:"no"},{id:6,Query:"@bu",BU:"",parentid:"no"},{id:7,Query:"dsfsdfdsfdsf",BU:"WTCTW",parentid:6},{id:8,Query:"dsfsdfdsfdsf",BU:"Others",parentid:6},{id:9,Query:"dsfsdfdsfdsf",BU:"WTCTH",parentid:6}]),C=Object(f.a)(v,2),w=C[0],E=C[1],Q=Object(n.useState)([{title:"Query",field:"Query",editable:"always",cellStyle:{color:"black"},editComponent:function(e){var t="";return t=e.value.includes("@")?e.value.replace("@",""):e.value,Object(q.jsx)(ce.a,{multiline:!0,value:t,onChange:function(t){return e.onChange(t.target.value)}})},render:function(t){return Object(q.jsx)(ue.a,{autoEscape:!0,searchWords:G,textToHighlight:t.Query,findChunks:e,highlightStyle:{color:t.Query.startsWith("@")?"#f2d273":"#32CD32","background-color":"transparent","font-weight":"900","text-transform":"uppercase"}})}},{title:"BU",field:"BU",textAlign:"centre",lookup:{None:"",Others:"Others",FTRTH:"FTRHK",PNSHK:"PNSHK",WTCHK:"WTCHK",WTCID:"WTCID",WTCPH:"WTCPH",WWHK:"WWHK",WTCTW:"WTCTW",WTCMY:"WTCMY",WTCTH:"WTCTH",WTCSG:"WTCSG"}}]),R=Object(f.a)(Q,2),x=R[0],U=(R[1],function(e){var t=Object(u.a)(w),r=[],n={},a=["ftrhk","pnshk","wtchk","wtcid","wtcph","wwhk","wtctw","wtcmy","wtcth","wtcsg"],o=[],i="",c="nothing",d="nothing";for(var s in a)o.push(a[s].toUpperCase());for(var f in t)"no"==t[f].parentid&&r.push(t[f].Query);for(var f in t)if(1==t[f].Query.includes("@")){var l=t[f].Query.substring(1);for(var b in n[l]=[],t)t[b].parentid==t[f].id&&n[l].push({BU:t[b].BU,Query:t[b].Query})}for(var j in n["@bu_query"]={},o)for(var O in n["@bu_query"][o[j]]=[],r)if(c="nothing",d="nothing",1==r[O].includes("@")){for(var p in n[i=r[O].substring(1)])n[i][p].BU==o[j]&&(c=n[i][p].Query),"Others"==n[i][p].BU&&(d=n[i][p].Query);"nothing"==c?n["@bu_query"][o[j]].push(d):n["@bu_query"][o[j]].push(c)}else n["@bu_query"][o[j]].push(r[O]);n.template_query=r;var y=JSON.stringify(n);if("install"!=e)return y;var h=new Blob([y],{type:"text/plain"}),T=URL.createObjectURL(h),g=document.createElement("a");g.download="master.json",g.href=T,g.click()}),S=function(e,t){g(Object(u.a)(w));for(var r=Object(u.a)(w),n=t.id,a=Math.floor(1e6*Math.random()),o=[],i=void 0,c="";void 0!=i;)a=Math.floor(1e6*Math.random()),void 0==(i=o.find((function(e){return e==a})))&&(i=o.find((function(e){return e==a+1})));for(var d in r.push({id:a,Query:"-",BU:"-",parentid:n}),r)c=r[d].Query,r[d].id==n&1!=r[d].Query.includes("@")&&(r[d].Query="@"+c);setTimeout((function(){E(r),M(!1)}),500)},B={row:-1,dropIndex:-1},W=function(e,t){g(Object(u.a)(w));var r=w;if("no"==r[e].parentid&"no"==r[t].parentid);else{if(!("no"!=r[e].parentid&"no"!=r[t].parentid))return;if(r[e].parentid!=r[t].parentid)return}var n=function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];if(e<t){console.log("to higher");var n=r.slice(0,e),a=r.slice(e+1,t+1),o=r.slice(t+1),i=[].concat(Object(u.a)(n),Object(u.a)(a),[r[e]],Object(u.a)(o));if("no"!=r[e].parentid)return i;var c,d=[],l=[],b=Object(u.a)(Array(a.length).keys()),j=Object(s.a)(Object(de.zip)(a,b));try{for(j.s();!(c=j.n()).done;){var O=Object(f.a)(c.value,2),p=O[0],y=O[1];p.parentid==r[e].id&&(d.push(y),l.push(p))}}catch(E){j.e(E)}finally{j.f()}if(0==d.length)return i;console.log(d);var h=Math.min(d),T=a.splice(h,a.length-1);console.log(T),console.log(a),console.log(n),console.log(r[e]);var g=[].concat(Object(u.a)(n),Object(u.a)(a),[r[e]],l,Object(u.a)(o));return console.log(g),g}if(e>t){var v=r.slice(0,t),C=r.slice(t,e),w=r.slice(e+1);return[].concat(Object(u.a)(v),[r[e]],Object(u.a)(C),Object(u.a)(w))}return r}(e,t,r);E(n),M(!1)},m=Object(n.useState)(!0),k=Object(f.a)(m,2),I=k[0],M=k[1];return Object(q.jsxs)("div",{className:"OCTAVIA",children:[Object(q.jsx)("input",{type:"file",onChange:function(e){var t=e.target.files[0];console.log(t.name);var r=new FileReader;t.name.includes(".json")?r.onload=function(e){console.log(r.name);var t=JSON.parse(e.target.result),n=[];for(var a in t.template_query){var o=Math.floor(1e6*Math.random());if(1!=t.template_query[a].includes("@"))n.push({id:o,Query:t.template_query[a],BU:"",parentid:"no"});else{var i=t.template_query[a].substring(1);for(var c in n.push({id:o,Query:t.template_query[a],BU:"",parentid:"no"}),t[i])n.push({id:o+Math.floor(100*Math.random()),Query:t[i][c].Query,BU:t[i][c].BU,parentid:o})}}E(n)}:t.name.includes(".txt")?r.onload=function(e){var t=[],r=e.target.result.split(/\r?\n/);for(var n in r){var a=Math.floor(1e6*Math.random());""!=r[n].replace(/\s+/g,"")&&1!=r[n].startsWith("--")&&t.push({id:a,Query:r[n],BU:"",parentid:"no"})}E(t)}:alert("incorrect file type"),r.readAsBinaryString(t)}}),Object(q.jsx)(b.a,{title:"Query Editior",style:{width:"100%",margin:"0%"},icons:{Edit:function(){return Object(q.jsx)(ie.a,{style:{color:"black"}})},Delete:function(){return Object(q.jsx)(ae.a,{style:{color:"black"}})},Check:function(){return Object(q.jsx)(Z.a,{style:{color:"black","margin-left":"30px"}})},Clear:function(){return Object(q.jsx)(Y.a,{style:{color:"black"}})}},editable:{onRowUpdate:function(e,t){return new Promise((function(r,n){setTimeout((function(){console.log(w);var n,a=Object(u.a)(w),o=Object(u.a)(w),i=Object(u.a)(Array(o.length).keys()),c=e.id,d="",l=e,b=Object(s.a)(Object(de.zip)(o,i));try{for(b.s();!(n=b.n()).done;){var j=Object(f.a)(n.value,2),O=j[0],p=j[1];if(O.id==c){d=p;break}}}catch(y){b.e(y)}finally{b.f()}console.log(t),1==t.Query.startsWith("@")?(l.Query=e.Query.replace("@",""),l.Query="@"+l.Query):l.Query=e.Query.replace("@",""),(a=a.filter((function(t){return t.id!==e.id}))).splice(d,0,l),g(Object(u.a)(w)),E(a),M(!1),r()}),1e3)}))},onRowDelete:function(e,t){return new Promise((function(t,r){setTimeout((function(){var r=[e],n=Object(u.a)(w);r.forEach((function(e){n=n.filter((function(t){return t.id!==e.id}))}));var a=Object(u.a)(n);r.forEach((function(e){a=a.filter((function(t){return t.parentid==e.parentid}))})),console.log(a);var o=n;if("no"!=r[0].parentid)if(0==a.length)for(var i in n)r[0].parentid==n[i].id&&n[i].Query.startsWith("@")&&(n[i].Query=n[i].Query.substring(1));else console.log("pass");else o.forEach((function(e){n=n.filter((function(e){return e.parentid!==r[0].id}))}));g(Object(u.a)(w)),E(n),M(!1),t()}),1e3)}))}},columns:x,data:w,parentChildData:function(e,t){return t.find((function(t){return t.id==e.parentid}))},onRowClick:function(e,t){return j(t.tableData.id)},options:{actionsCellStyle:{color:"black"},loadingType:"linear",tableLayout:"auto",headerSelectionProps:{disabled:!0},headerStyle:{position:"sticky",top:1,backgroundColor:"#f7f7f7"},isLoading:!0,sorting:!1,paging:!1,padding:"dense",selection:!1,draggable:!0,selectionProps:function(e){return{disabled:!0}},rowStyle:function(e){e.tableData.isTreeExpanded;var t,r={transition:"transform 300ms"},n=1===e.tableData.path.length?0:e.tableData.path.length;return r=Object(d.a)(Object(d.a)({},r),{},{"--left-before":"".concat(6*n,"px")}),"no"!=e.parentid?(t={backgroundColor:i===e.tableData.id?"#EEE":"#FFF"},Object(c.a)(t,"backgroundColor","rgba(77, 93, 241, 0.08)"),Object(c.a)(t,"text-indent","20px"),Object(c.a)(t,"font-size","12px"),Object(c.a)(t,"white-space","pre"),t):{"font-size":"12px","white-space":"pre"}}},localization:{header:{actions:"Actions"}},actions:[{icon:V.a,iconProps:{color:"secondary"},tooltip:"last step",onClick:function(){E(T),M(!0)},position:"toolbar",disabled:1==I},{icon:z.Export,tooltip:"export",iconProps:{style:{fontSize:"6px",color:"green"}},onClick:function(){Object(u.a)(w),U("install")},position:"toolbar"},{icon:z.ViewColumn,tooltip:"Query Validate",iconProps:{style:{fontSize:"6px",color:"green"}},onClick:function(e){var t=JSON.parse(U("validate"))["@bu_query"].WTCTW.join(" ");le.a.post("https://extendsclass.com/sql-syntax-tester",t,{headers:{"Content-Type":"text/plain"}}).then((function(e){console.log(e.data)})),e.preventDefault()},position:"toolbar"},{icon:function(){return Object(q.jsx)(ee.a,{style:{color:"black"}})},tooltip:"Add Rows",position:"row",onClick:function(e,t){if(g(Object(u.a)(w)),1!=(t=[t]).length)return alert('you can"t select more than one row when u add new row');var r=Object(u.a)(w),n=Object(u.a)(Array(r.length).keys()),a=Math.floor(1e6*Math.random()),o=t[0].id,i=t[0].parentid,c=[],d=void 0;for(var l in r)c.push(r[l].id);for(console.log("b");void 0!=d;)a=Math.floor(1e6*Math.random()),void 0==(d=c.find((function(e){return e==a})))&&(d=c.find((function(e){return e==a+1})));var b,j=Object(s.a)(Object(de.zip)(r,n));try{for(j.s();!(b=j.n()).done;){var O=Object(f.a)(b.value,2),p=O[0],y=O[1];if(p.id==o){"no"!=t[0].parentid?r.splice(y+1,0,{id:a,Query:"-",BU:"-",parentid:i}):r.splice(y+1,0,{id:a,Query:"-",BU:"",parentid:"no"});break}}}catch(h){j.e(h)}finally{j.f()}setTimeout((function(){E(r),M(!1)}),500)},isLoading:!0},function(e){return{icon:function(){var t="black";return null!=e.tableData.childRows&&(t="grey"),Object(q.jsx)(re.a,{style:{color:t}})},tooltip:"Variation",position:"row",hidden:"no"!=e.parentid,onClick:S,disabled:null!=e.tableData.childRows}}],components:{Row:function(e){return Object(q.jsx)(l.MTableBodyRow,Object(d.a)(Object(d.a)({},e),{},{draggable:"true",onDoubleClick:function(t){e.actions[4]().onClick(t,e.data)},onDragStart:function(t){var r,n=Object(u.a)(w),a=Object(u.a)(Array(n.length).keys()),o=e.data.id,i=Object(s.a)(Object(de.zip)(n,a));try{for(i.s();!(r=i.n()).done;){var c=Object(f.a)(r.value,2),d=c[0],l=c[1];if(d.id==o){B.row=l;break}}}catch(b){i.e(b)}finally{i.f()}},onDragEnter:function(t){var r,n=Object(u.a)(w),a=Object(u.a)(Array(n.length).keys()),o=e.data.id,i="",c=Object(s.a)(Object(de.zip)(n,a));try{for(c.s();!(r=c.n()).done;){var d=Object(f.a)(r.value,2),l=d[0],b=d[1];if(l.id==o){i=b;break}}}catch(j){c.e(j)}finally{c.f()}i!==B.row&&(B.dropIndex=i)},onDragEnd:function(e){-1!==B.dropIndex&&W(B.row,B.dropIndex)}}))}}})]})};i.a.render(Object(q.jsx)(a.a.StrictMode,{children:Object(q.jsx)(be,{})}),document.getElementById("root"))}},[[338,1,2]]]);
//# sourceMappingURL=main.c2fbb761.chunk.js.map